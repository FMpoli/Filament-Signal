var MailNode=(()=>{var Nl=Object.create;var dn=Object.defineProperty;var Cl=Object.getOwnPropertyDescriptor;var Ml=Object.getOwnPropertyNames;var Al=Object.getPrototypeOf,Tl=Object.prototype.hasOwnProperty;var Le=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),kl=(e,t)=>{for(var n in t)dn(e,n,{get:t[n],enumerable:!0})},ao=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Ml(t))!Tl.call(e,o)&&o!==n&&dn(e,o,{get:()=>t[o],enumerable:!(r=Cl(t,o))||r.enumerable});return e};var nt=(e,t,n)=>(n=e!=null?Nl(Al(e)):{},ao(t||!e||!e.__esModule?dn(n,"default",{value:e,enumerable:!0}):n,e)),Il=e=>ao(dn({},"__esModule",{value:!0}),e);var wo=Le(U=>{"use strict";var sr=Symbol.for("react.transitional.element"),Ol=Symbol.for("react.portal"),Dl=Symbol.for("react.fragment"),Pl=Symbol.for("react.strict_mode"),$l=Symbol.for("react.profiler"),zl=Symbol.for("react.consumer"),Hl=Symbol.for("react.context"),Rl=Symbol.for("react.forward_ref"),Ll=Symbol.for("react.suspense"),Bl=Symbol.for("react.memo"),po=Symbol.for("react.lazy"),Vl=Symbol.for("react.activity"),lo=Symbol.iterator;function Fl(e){return e===null||typeof e!="object"?null:(e=lo&&e[lo]||e["@@iterator"],typeof e=="function"?e:null)}var ho={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mo=Object.assign,go={};function bt(e,t,n){this.props=e,this.context=t,this.refs=go,this.updater=n||ho}bt.prototype.isReactComponent={};bt.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};bt.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function yo(){}yo.prototype=bt.prototype;function ar(e,t,n){this.props=e,this.context=t,this.refs=go,this.updater=n||ho}var lr=ar.prototype=new yo;lr.constructor=ar;mo(lr,bt.prototype);lr.isPureReactComponent=!0;var co=Array.isArray;function ir(){}var ee={H:null,A:null,T:null,S:null},xo=Object.prototype.hasOwnProperty;function cr(e,t,n){var r=n.ref;return{$$typeof:sr,type:e,key:t,ref:r!==void 0?r:null,props:n}}function Yl(e,t){return cr(e.type,t,e.props)}function ur(e){return typeof e=="object"&&e!==null&&e.$$typeof===sr}function Xl(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var uo=/\/+/g;function or(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Xl(""+e.key):t.toString(36)}function Ul(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(ir,ir):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function vt(e,t,n,r,o){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(s){case"bigint":case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case sr:case Ol:i=!0;break;case po:return i=e._init,vt(i(e._payload),t,n,r,o)}}if(i)return o=o(e),i=r===""?"."+or(e,0):r,co(o)?(n="",i!=null&&(n=i.replace(uo,"$&/")+"/"),vt(o,t,n,"",function(u){return u})):o!=null&&(ur(o)&&(o=Yl(o,n+(o.key==null||e&&e.key===o.key?"":(""+o.key).replace(uo,"$&/")+"/")+i)),t.push(o)),1;i=0;var a=r===""?".":r+":";if(co(e))for(var l=0;l<e.length;l++)r=e[l],s=a+or(r,l),i+=vt(r,t,n,s,o);else if(l=Fl(e),typeof l=="function")for(e=l.call(e),l=0;!(r=e.next()).done;)r=r.value,s=a+or(r,l++),i+=vt(r,t,n,s,o);else if(s==="object"){if(typeof e.then=="function")return vt(Ul(e),t,n,r,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return i}function pn(e,t,n){if(e==null)return e;var r=[],o=0;return vt(e,r,"","",function(s){return t.call(n,s,o++)}),r}function ql(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var fo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Kl={map:pn,forEach:function(e,t,n){pn(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return pn(e,function(){t++}),t},toArray:function(e){return pn(e,function(t){return t})||[]},only:function(e){if(!ur(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};U.Activity=Vl;U.Children=Kl;U.Component=bt;U.Fragment=Dl;U.Profiler=$l;U.PureComponent=ar;U.StrictMode=Pl;U.Suspense=Ll;U.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ee;U.__COMPILER_RUNTIME={__proto__:null,c:function(e){return ee.H.useMemoCache(e)}};U.cache=function(e){return function(){return e.apply(null,arguments)}};U.cacheSignal=function(){return null};U.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var r=mo({},e.props),o=e.key;if(t!=null)for(s in t.key!==void 0&&(o=""+t.key),t)!xo.call(t,s)||s==="key"||s==="__self"||s==="__source"||s==="ref"&&t.ref===void 0||(r[s]=t[s]);var s=arguments.length-2;if(s===1)r.children=n;else if(1<s){for(var i=Array(s),a=0;a<s;a++)i[a]=arguments[a+2];r.children=i}return cr(e.type,o,r)};U.createContext=function(e){return e={$$typeof:Hl,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:zl,_context:e},e};U.createElement=function(e,t,n){var r,o={},s=null;if(t!=null)for(r in t.key!==void 0&&(s=""+t.key),t)xo.call(t,r)&&r!=="key"&&r!=="__self"&&r!=="__source"&&(o[r]=t[r]);var i=arguments.length-2;if(i===1)o.children=n;else if(1<i){for(var a=Array(i),l=0;l<i;l++)a[l]=arguments[l+2];o.children=a}if(e&&e.defaultProps)for(r in i=e.defaultProps,i)o[r]===void 0&&(o[r]=i[r]);return cr(e,s,o)};U.createRef=function(){return{current:null}};U.forwardRef=function(e){return{$$typeof:Rl,render:e}};U.isValidElement=ur;U.lazy=function(e){return{$$typeof:po,_payload:{_status:-1,_result:e},_init:ql}};U.memo=function(e,t){return{$$typeof:Bl,type:e,compare:t===void 0?null:t}};U.startTransition=function(e){var t=ee.T,n={};ee.T=n;try{var r=e(),o=ee.S;o!==null&&o(n,r),typeof r=="object"&&r!==null&&typeof r.then=="function"&&r.then(ir,fo)}catch(s){fo(s)}finally{t!==null&&n.types!==null&&(t.types=n.types),ee.T=t}};U.unstable_useCacheRefresh=function(){return ee.H.useCacheRefresh()};U.use=function(e){return ee.H.use(e)};U.useActionState=function(e,t,n){return ee.H.useActionState(e,t,n)};U.useCallback=function(e,t){return ee.H.useCallback(e,t)};U.useContext=function(e){return ee.H.useContext(e)};U.useDebugValue=function(){};U.useDeferredValue=function(e,t){return ee.H.useDeferredValue(e,t)};U.useEffect=function(e,t){return ee.H.useEffect(e,t)};U.useEffectEvent=function(e){return ee.H.useEffectEvent(e)};U.useId=function(){return ee.H.useId()};U.useImperativeHandle=function(e,t,n){return ee.H.useImperativeHandle(e,t,n)};U.useInsertionEffect=function(e,t){return ee.H.useInsertionEffect(e,t)};U.useLayoutEffect=function(e,t){return ee.H.useLayoutEffect(e,t)};U.useMemo=function(e,t){return ee.H.useMemo(e,t)};U.useOptimistic=function(e,t){return ee.H.useOptimistic(e,t)};U.useReducer=function(e,t,n){return ee.H.useReducer(e,t,n)};U.useRef=function(e){return ee.H.useRef(e)};U.useState=function(e){return ee.H.useState(e)};U.useSyncExternalStore=function(e,t,n){return ee.H.useSyncExternalStore(e,t,n)};U.useTransition=function(){return ee.H.useTransition()};U.version="19.2.3"});var $e=Le((Ip,vo)=>{"use strict";vo.exports=wo()});var Eo=Le(bo=>{"use strict";var Et=$e();function Zl(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Wl=typeof Object.is=="function"?Object.is:Zl,Gl=Et.useState,jl=Et.useEffect,Ql=Et.useLayoutEffect,Jl=Et.useDebugValue;function ec(e,t){var n=t(),r=Gl({inst:{value:n,getSnapshot:t}}),o=r[0].inst,s=r[1];return Ql(function(){o.value=n,o.getSnapshot=t,fr(o)&&s({inst:o})},[e,n,t]),jl(function(){return fr(o)&&s({inst:o}),e(function(){fr(o)&&s({inst:o})})},[e]),Jl(n),n}function fr(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Wl(e,n)}catch{return!0}}function tc(e,t){return t()}var nc=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?tc:ec;bo.useSyncExternalStore=Et.useSyncExternalStore!==void 0?Et.useSyncExternalStore:nc});var _o=Le((Pp,So)=>{"use strict";So.exports=Eo()});var Co=Le(No=>{"use strict";var hn=$e(),rc=_o();function oc(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ic=typeof Object.is=="function"?Object.is:oc,sc=rc.useSyncExternalStore,ac=hn.useRef,lc=hn.useEffect,cc=hn.useMemo,uc=hn.useDebugValue;No.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var s=ac(null);if(s.current===null){var i={hasValue:!1,value:null};s.current=i}else i=s.current;s=cc(function(){function l(m){if(!u){if(u=!0,c=m,m=r(m),o!==void 0&&i.hasValue){var v=i.value;if(o(v,m))return f=v}return f=m}if(v=f,ic(c,m))return v;var y=r(m);return o!==void 0&&o(v,y)?(c=m,v):(c=m,f=y)}var u=!1,c,f,p=n===void 0?null:n;return[function(){return l(t())},p===null?void 0:function(){return l(p())}]},[t,n,r,o]);var a=sc(e,s[0],s[1]);return lc(function(){i.hasValue=!0,i.value=a},[a]),uc(a),a}});var Ao=Le((zp,Mo)=>{"use strict";Mo.exports=Co()});var Ns=Le(he=>{"use strict";var kf=$e();function _s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Xe(){}var pe={d:{f:Xe,r:function(){throw Error(_s(522))},D:Xe,C:Xe,L:Xe,m:Xe,X:Xe,S:Xe,M:Xe},p:0,findDOMNode:null},If=Symbol.for("react.portal");function Of(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:If,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}var on=kf.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Yn(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}he.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=pe;he.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(_s(299));return Of(e,t,null,n)};he.flushSync=function(e){var t=on.T,n=pe.p;try{if(on.T=null,pe.p=2,e)return e()}finally{on.T=t,pe.p=n,pe.d.f()}};he.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,pe.d.C(e,t))};he.prefetchDNS=function(e){typeof e=="string"&&pe.d.D(e)};he.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,r=Yn(n,t.crossOrigin),o=typeof t.integrity=="string"?t.integrity:void 0,s=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?pe.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:r,integrity:o,fetchPriority:s}):n==="script"&&pe.d.X(e,{crossOrigin:r,integrity:o,fetchPriority:s,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};he.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=Yn(t.as,t.crossOrigin);pe.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&pe.d.M(e)};he.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,r=Yn(n,t.crossOrigin);pe.d.L(e,n,{crossOrigin:r,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};he.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=Yn(t.as,t.crossOrigin);pe.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else pe.d.m(e)};he.requestFormReset=function(e){pe.d.r(e)};he.unstable_batchedUpdates=function(e,t){return e(t)};he.useFormState=function(e,t,n){return on.H.useFormState(e,t,n)};he.useFormStatus=function(){return on.H.useHostTransitionStatus()};he.version="19.2.3"});var As=Le((ux,Ms)=>{"use strict";function Cs(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Cs)}catch(e){console.error(e)}}Cs(),Ms.exports=Ns()});var Ap={};kl(Ap,{default:()=>Mp});var q=nt($e(),1);var h=nt($e(),1);function ge(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=ge(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Do=nt($e(),1),Po=nt(Ao(),1);var ko={},To=e=>{let t,n=new Set,r=(c,f)=>{let p=typeof c=="function"?c(t):c;if(!Object.is(p,t)){let m=t;t=f??(typeof p!="object"||p===null)?p:Object.assign({},t,p),n.forEach(v=>v(t,m))}},o=()=>t,l={setState:r,getState:o,getInitialState:()=>u,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{(ko.env?ko.env.MODE:void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,o,l);return l},Io=e=>e?To(e):To;var{useDebugValue:fc}=Do.default,{useSyncExternalStoreWithSelector:dc}=Po.default,pc=e=>e;function dr(e,t=pc,n){let r=dc(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return fc(r),r}var Oo=(e,t)=>{let n=Io(e),r=(o,s=t)=>dr(n,o,s);return Object.assign(r,n),r},$o=(e,t)=>e?Oo(e,t):Oo;function ue(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(let[r,o]of e)if(!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(let r of e)if(!t.has(r))return!1;return!0}let n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var hc={value:()=>{}};function Ho(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new mn(n)}function mn(e){this._=e}function mc(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}mn.prototype=Ho.prototype={constructor:mn,on:function(e,t){var n=this._,r=mc(e+"",n),o,s=-1,i=r.length;if(arguments.length<2){for(;++s<i;)if((o=(e=r[s]).type)&&(o=gc(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(o=(e=r[s]).type)n[o]=zo(n[o],e.name,t);else if(t==null)for(o in n)n[o]=zo(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new mn(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,s;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,o=s.length;r<o;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,s=r.length;o<s;++o)r[o].value.apply(t,n)}};function gc(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function zo(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=hc,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var rt=Ho;var gn="http://www.w3.org/1999/xhtml",pr={svg:"http://www.w3.org/2000/svg",xhtml:gn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ze(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),pr.hasOwnProperty(t)?{space:pr[t],local:e}:e}function yc(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===gn&&t.documentElement.namespaceURI===gn?t.createElement(e):t.createElementNS(n,e)}}function xc(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function yn(e){var t=ze(e);return(t.local?xc:yc)(t)}function wc(){}function ot(e){return e==null?wc:function(){return this.querySelector(e)}}function Ro(e){typeof e!="function"&&(e=ot(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var s=t[o],i=s.length,a=r[o]=new Array(i),l,u,c=0;c<i;++c)(l=s[c])&&(u=e.call(l,l.__data__,c,s))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new ne(r,this._parents)}function hr(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function vc(){return[]}function Lt(e){return e==null?vc:function(){return this.querySelectorAll(e)}}function bc(e){return function(){return hr(e.apply(this,arguments))}}function Lo(e){typeof e=="function"?e=bc(e):e=Lt(e);for(var t=this._groups,n=t.length,r=[],o=[],s=0;s<n;++s)for(var i=t[s],a=i.length,l,u=0;u<a;++u)(l=i[u])&&(r.push(e.call(l,l.__data__,u,i)),o.push(l));return new ne(r,o)}function Bt(e){return function(){return this.matches(e)}}function xn(e){return function(t){return t.matches(e)}}var Ec=Array.prototype.find;function Sc(e){return function(){return Ec.call(this.children,e)}}function _c(){return this.firstElementChild}function Bo(e){return this.select(e==null?_c:Sc(typeof e=="function"?e:xn(e)))}var Nc=Array.prototype.filter;function Cc(){return Array.from(this.children)}function Mc(e){return function(){return Nc.call(this.children,e)}}function Vo(e){return this.selectAll(e==null?Cc:Mc(typeof e=="function"?e:xn(e)))}function Fo(e){typeof e!="function"&&(e=Bt(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var s=t[o],i=s.length,a=r[o]=[],l,u=0;u<i;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&a.push(l);return new ne(r,this._parents)}function wn(e){return new Array(e.length)}function Yo(){return new ne(this._enter||this._groups.map(wn),this._parents)}function Vt(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Vt.prototype={constructor:Vt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Xo(e){return function(){return e}}function Ac(e,t,n,r,o,s){for(var i=0,a,l=t.length,u=s.length;i<u;++i)(a=t[i])?(a.__data__=s[i],r[i]=a):n[i]=new Vt(e,s[i]);for(;i<l;++i)(a=t[i])&&(o[i]=a)}function Tc(e,t,n,r,o,s,i){var a,l,u=new Map,c=t.length,f=s.length,p=new Array(c),m;for(a=0;a<c;++a)(l=t[a])&&(p[a]=m=i.call(l,l.__data__,a,t)+"",u.has(m)?o[a]=l:u.set(m,l));for(a=0;a<f;++a)m=i.call(e,s[a],a,s)+"",(l=u.get(m))?(r[a]=l,l.__data__=s[a],u.delete(m)):n[a]=new Vt(e,s[a]);for(a=0;a<c;++a)(l=t[a])&&u.get(p[a])===l&&(o[a]=l)}function kc(e){return e.__data__}function Uo(e,t){if(!arguments.length)return Array.from(this,kc);var n=t?Tc:Ac,r=this._parents,o=this._groups;typeof e!="function"&&(e=Xo(e));for(var s=o.length,i=new Array(s),a=new Array(s),l=new Array(s),u=0;u<s;++u){var c=r[u],f=o[u],p=f.length,m=Ic(e.call(c,c&&c.__data__,u,r)),v=m.length,y=a[u]=new Array(v),E=i[u]=new Array(v),g=l[u]=new Array(p);n(c,f,y,E,g,m,t);for(var w=0,C=0,x,N;w<v;++w)if(x=y[w]){for(w>=C&&(C=w+1);!(N=E[C])&&++C<v;);x._next=N||null}}return i=new ne(i,r),i._enter=a,i._exit=l,i}function Ic(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function qo(){return new ne(this._exit||this._groups.map(wn),this._parents)}function Ko(e,t,n){var r=this.enter(),o=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?s.remove():n(s),r&&o?r.merge(o).order():o}function Zo(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,s=r.length,i=Math.min(o,s),a=new Array(o),l=0;l<i;++l)for(var u=n[l],c=r[l],f=u.length,p=a[l]=new Array(f),m,v=0;v<f;++v)(m=u[v]||c[v])&&(p[v]=m);for(;l<o;++l)a[l]=n[l];return new ne(a,this._parents)}function Wo(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,s=r[o],i;--o>=0;)(i=r[o])&&(s&&i.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(i,s),s=i);return this}function Go(e){e||(e=Oc);function t(f,p){return f&&p?e(f.__data__,p.__data__):!f-!p}for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s){for(var i=n[s],a=i.length,l=o[s]=new Array(a),u,c=0;c<a;++c)(u=i[c])&&(l[c]=u);l.sort(t)}return new ne(o,this._parents).order()}function Oc(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function jo(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Qo(){return Array.from(this)}function Jo(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,s=r.length;o<s;++o){var i=r[o];if(i)return i}return null}function ei(){let e=0;for(let t of this)++e;return e}function ti(){return!this.node()}function ni(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],s=0,i=o.length,a;s<i;++s)(a=o[s])&&e.call(a,a.__data__,s,o);return this}function Dc(e){return function(){this.removeAttribute(e)}}function Pc(e){return function(){this.removeAttributeNS(e.space,e.local)}}function $c(e,t){return function(){this.setAttribute(e,t)}}function zc(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Hc(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Rc(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function ri(e,t){var n=ze(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Pc:Dc:typeof t=="function"?n.local?Rc:Hc:n.local?zc:$c)(n,t))}function vn(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Lc(e){return function(){this.style.removeProperty(e)}}function Bc(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Vc(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function oi(e,t,n){return arguments.length>1?this.each((t==null?Lc:typeof t=="function"?Vc:Bc)(e,t,n??"")):Be(this.node(),e)}function Be(e,t){return e.style.getPropertyValue(t)||vn(e).getComputedStyle(e,null).getPropertyValue(t)}function Fc(e){return function(){delete this[e]}}function Yc(e,t){return function(){this[e]=t}}function Xc(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function ii(e,t){return arguments.length>1?this.each((t==null?Fc:typeof t=="function"?Xc:Yc)(e,t)):this.node()[e]}function si(e){return e.trim().split(/^|\s+/)}function mr(e){return e.classList||new ai(e)}function ai(e){this._node=e,this._names=si(e.getAttribute("class")||"")}ai.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function li(e,t){for(var n=mr(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function ci(e,t){for(var n=mr(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function Uc(e){return function(){li(this,e)}}function qc(e){return function(){ci(this,e)}}function Kc(e,t){return function(){(t.apply(this,arguments)?li:ci)(this,e)}}function ui(e,t){var n=si(e+"");if(arguments.length<2){for(var r=mr(this.node()),o=-1,s=n.length;++o<s;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?Kc:t?Uc:qc)(n,t))}function Zc(){this.textContent=""}function Wc(e){return function(){this.textContent=e}}function Gc(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function fi(e){return arguments.length?this.each(e==null?Zc:(typeof e=="function"?Gc:Wc)(e)):this.node().textContent}function jc(){this.innerHTML=""}function Qc(e){return function(){this.innerHTML=e}}function Jc(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function di(e){return arguments.length?this.each(e==null?jc:(typeof e=="function"?Jc:Qc)(e)):this.node().innerHTML}function eu(){this.nextSibling&&this.parentNode.appendChild(this)}function pi(){return this.each(eu)}function tu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function hi(){return this.each(tu)}function mi(e){var t=typeof e=="function"?e:yn(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function nu(){return null}function gi(e,t){var n=typeof e=="function"?e:yn(e),r=t==null?nu:typeof t=="function"?t:ot(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ru(){var e=this.parentNode;e&&e.removeChild(this)}function yi(){return this.each(ru)}function ou(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function iu(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function xi(e){return this.select(e?iu:ou)}function wi(e){return arguments.length?this.property("__data__",e):this.node().__data__}function su(e){return function(t){e.call(this,t,this.__data__)}}function au(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function lu(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,s;n<o;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function cu(e,t,n){return function(){var r=this.__on,o,s=su(t);if(r){for(var i=0,a=r.length;i<a;++i)if((o=r[i]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=s,o.options=n),o.value=t;return}}this.addEventListener(e.type,s,n),o={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(o):this.__on=[o]}}function vi(e,t,n){var r=au(e+""),o,s=r.length,i;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(o=0,c=a[l];o<s;++o)if((i=r[o]).type===c.type&&i.name===c.name)return c.value}return}for(a=t?cu:lu,o=0;o<s;++o)this.each(a(r[o],t,n));return this}function bi(e,t,n){var r=vn(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function uu(e,t){return function(){return bi(this,e,t)}}function fu(e,t){return function(){return bi(this,e,t.apply(this,arguments))}}function Ei(e,t){return this.each((typeof t=="function"?fu:uu)(e,t))}function*Si(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,s=r.length,i;o<s;++o)(i=r[o])&&(yield i)}var gr=[null];function ne(e,t){this._groups=e,this._parents=t}function _i(){return new ne([[document.documentElement]],gr)}function du(){return this}ne.prototype=_i.prototype={constructor:ne,select:Ro,selectAll:Lo,selectChild:Bo,selectChildren:Vo,filter:Fo,data:Uo,enter:Yo,exit:qo,join:Ko,merge:Zo,selection:du,order:Wo,sort:Go,call:jo,nodes:Qo,node:Jo,size:ei,empty:ti,each:ni,attr:ri,style:oi,property:ii,classed:ui,text:fi,html:di,raise:pi,lower:hi,append:mi,insert:gi,remove:yi,clone:xi,datum:wi,on:vi,dispatch:Ei,[Symbol.iterator]:Si};var He=_i;function fe(e){return typeof e=="string"?new ne([[document.querySelector(e)]],[document.documentElement]):new ne([[e]],gr)}function Ni(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ye(e,t){if(e=Ni(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}var Ci={passive:!1},it={capture:!0,passive:!1};function bn(e){e.stopImmediatePropagation()}function Ve(e){e.preventDefault(),e.stopImmediatePropagation()}function Ft(e){var t=e.document.documentElement,n=fe(e).on("dragstart.drag",Ve,it);"onselectstart"in t?n.on("selectstart.drag",Ve,it):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Yt(e,t){var n=e.document.documentElement,r=fe(e).on("dragstart.drag",null);t&&(r.on("click.drag",Ve,it),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var Xt=e=>()=>e;function Ut(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:s,x:i,y:a,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}Ut.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function pu(e){return!e.ctrlKey&&!e.button}function hu(){return this.parentNode}function mu(e,t){return t??{x:e.x,y:e.y}}function gu(){return navigator.maxTouchPoints||"ontouchstart"in this}function yr(){var e=pu,t=hu,n=mu,r=gu,o={},s=rt("start","drag","end"),i=0,a,l,u,c,f=0;function p(x){x.on("mousedown.drag",m).filter(r).on("touchstart.drag",E).on("touchmove.drag",g,Ci).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(x,N){if(!(c||!e.call(this,x,N))){var M=C(this,t.call(this,x,N),x,N,"mouse");M&&(fe(x.view).on("mousemove.drag",v,it).on("mouseup.drag",y,it),Ft(x.view),bn(x),u=!1,a=x.clientX,l=x.clientY,M("start",x))}}function v(x){if(Ve(x),!u){var N=x.clientX-a,M=x.clientY-l;u=N*N+M*M>f}o.mouse("drag",x)}function y(x){fe(x.view).on("mousemove.drag mouseup.drag",null),Yt(x.view,u),Ve(x),o.mouse("end",x)}function E(x,N){if(e.call(this,x,N)){var M=x.changedTouches,D=t.call(this,x,N),R=M.length,k,z;for(k=0;k<R;++k)(z=C(this,D,x,N,M[k].identifier,M[k]))&&(bn(x),z("start",x,M[k]))}}function g(x){var N=x.changedTouches,M=N.length,D,R;for(D=0;D<M;++D)(R=o[N[D].identifier])&&(Ve(x),R("drag",x,N[D]))}function w(x){var N=x.changedTouches,M=N.length,D,R;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),D=0;D<M;++D)(R=o[N[D].identifier])&&(bn(x),R("end",x,N[D]))}function C(x,N,M,D,R,k){var z=s.copy(),H=ye(k||M,N),L,$,d;if((d=n.call(x,new Ut("beforestart",{sourceEvent:M,target:p,identifier:R,active:i,x:H[0],y:H[1],dx:0,dy:0,dispatch:z}),D))!=null)return L=d.x-H[0]||0,$=d.y-H[1]||0,function _(b,A,O){var S=H,T;switch(b){case"start":o[R]=_,T=i++;break;case"end":delete o[R],--i;case"drag":H=ye(O||A,N),T=i;break}z.call(b,x,new Ut(b,{sourceEvent:A,subject:d,target:p,identifier:R,active:T,x:H[0]+L,y:H[1]+$,dx:H[0]-S[0],dy:H[1]-S[1],dispatch:z}),D)}}return p.filter=function(x){return arguments.length?(e=typeof x=="function"?x:Xt(!!x),p):e},p.container=function(x){return arguments.length?(t=typeof x=="function"?x:Xt(x),p):t},p.subject=function(x){return arguments.length?(n=typeof x=="function"?x:Xt(x),p):n},p.touchable=function(x){return arguments.length?(r=typeof x=="function"?x:Xt(!!x),p):r},p.on=function(){var x=s.on.apply(s,arguments);return x===s?p:x},p.clickDistance=function(x){return arguments.length?(f=(x=+x)*x,p):Math.sqrt(f)},p}function En(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function xr(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Zt(){}var qt=.7,Nn=1/qt,St="\\s*([+-]?\\d+)\\s*",Kt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Oe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",yu=/^#([0-9a-f]{3,8})$/,xu=new RegExp(`^rgb\\(${St},${St},${St}\\)$`),wu=new RegExp(`^rgb\\(${Oe},${Oe},${Oe}\\)$`),vu=new RegExp(`^rgba\\(${St},${St},${St},${Kt}\\)$`),bu=new RegExp(`^rgba\\(${Oe},${Oe},${Oe},${Kt}\\)$`),Eu=new RegExp(`^hsl\\(${Kt},${Oe},${Oe}\\)$`),Su=new RegExp(`^hsla\\(${Kt},${Oe},${Oe},${Kt}\\)$`),Mi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};En(Zt,Fe,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ai,formatHex:Ai,formatHex8:_u,formatHsl:Nu,formatRgb:Ti,toString:Ti});function Ai(){return this.rgb().formatHex()}function _u(){return this.rgb().formatHex8()}function Nu(){return $i(this).formatHsl()}function Ti(){return this.rgb().formatRgb()}function Fe(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=yu.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ki(t):n===3?new xe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Sn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Sn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=xu.exec(e))?new xe(t[1],t[2],t[3],1):(t=wu.exec(e))?new xe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=vu.exec(e))?Sn(t[1],t[2],t[3],t[4]):(t=bu.exec(e))?Sn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Eu.exec(e))?Di(t[1],t[2]/100,t[3]/100,1):(t=Su.exec(e))?Di(t[1],t[2]/100,t[3]/100,t[4]):Mi.hasOwnProperty(e)?ki(Mi[e]):e==="transparent"?new xe(NaN,NaN,NaN,0):null}function ki(e){return new xe(e>>16&255,e>>8&255,e&255,1)}function Sn(e,t,n,r){return r<=0&&(e=t=n=NaN),new xe(e,t,n,r)}function Cu(e){return e instanceof Zt||(e=Fe(e)),e?(e=e.rgb(),new xe(e.r,e.g,e.b,e.opacity)):new xe}function _t(e,t,n,r){return arguments.length===1?Cu(e):new xe(e,t,n,r??1)}function xe(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}En(xe,_t,xr(Zt,{brighter(e){return e=e==null?Nn:Math.pow(Nn,e),new xe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?qt:Math.pow(qt,e),new xe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new xe(at(this.r),at(this.g),at(this.b),Cn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ii,formatHex:Ii,formatHex8:Mu,formatRgb:Oi,toString:Oi}));function Ii(){return`#${st(this.r)}${st(this.g)}${st(this.b)}`}function Mu(){return`#${st(this.r)}${st(this.g)}${st(this.b)}${st((isNaN(this.opacity)?1:this.opacity)*255)}`}function Oi(){let e=Cn(this.opacity);return`${e===1?"rgb(":"rgba("}${at(this.r)}, ${at(this.g)}, ${at(this.b)}${e===1?")":`, ${e})`}`}function Cn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function at(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function st(e){return e=at(e),(e<16?"0":"")+e.toString(16)}function Di(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Me(e,t,n,r)}function $i(e){if(e instanceof Me)return new Me(e.h,e.s,e.l,e.opacity);if(e instanceof Zt||(e=Fe(e)),!e)return new Me;if(e instanceof Me)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),s=Math.max(t,n,r),i=NaN,a=s-o,l=(s+o)/2;return a?(t===s?i=(n-r)/a+(n<r)*6:n===s?i=(r-t)/a+2:i=(t-n)/a+4,a/=l<.5?s+o:2-s-o,i*=60):a=l>0&&l<1?0:i,new Me(i,a,l,e.opacity)}function zi(e,t,n,r){return arguments.length===1?$i(e):new Me(e,t,n,r??1)}function Me(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}En(Me,zi,xr(Zt,{brighter(e){return e=e==null?Nn:Math.pow(Nn,e),new Me(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?qt:Math.pow(qt,e),new Me(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new xe(wr(e>=240?e-240:e+120,o,r),wr(e,o,r),wr(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new Me(Pi(this.h),_n(this.s),_n(this.l),Cn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=Cn(this.opacity);return`${e===1?"hsl(":"hsla("}${Pi(this.h)}, ${_n(this.s)*100}%, ${_n(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Pi(e){return e=(e||0)%360,e<0?e+360:e}function _n(e){return Math.max(0,Math.min(1,e||0))}function wr(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function vr(e,t,n,r,o){var s=e*e,i=s*e;return((1-3*e+3*s-i)*t+(4-6*s+3*i)*n+(1+3*e+3*s-3*i)*r+i*o)/6}function Hi(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),o=e[r],s=e[r+1],i=r>0?e[r-1]:2*o-s,a=r<t-1?e[r+2]:2*s-o;return vr((n-r/t)*t,i,o,s,a)}}function Ri(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),o=e[(r+t-1)%t],s=e[r%t],i=e[(r+1)%t],a=e[(r+2)%t];return vr((n-r/t)*t,o,s,i,a)}}var br=e=>()=>e;function Au(e,t){return function(n){return e+n*t}}function Tu(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Li(e){return(e=+e)==1?Mn:function(t,n){return n-t?Tu(t,n,e):br(isNaN(t)?n:t)}}function Mn(e,t){var n=t-e;return n?Au(e,n):br(isNaN(e)?t:e)}var An=(function e(t){var n=Li(t);function r(o,s){var i=n((o=_t(o)).r,(s=_t(s)).r),a=n(o.g,s.g),l=n(o.b,s.b),u=Mn(o.opacity,s.opacity);return function(c){return o.r=i(c),o.g=a(c),o.b=l(c),o.opacity=u(c),o+""}}return r.gamma=e,r})(1);function Bi(e){return function(t){var n=t.length,r=new Array(n),o=new Array(n),s=new Array(n),i,a;for(i=0;i<n;++i)a=_t(t[i]),r[i]=a.r||0,o[i]=a.g||0,s[i]=a.b||0;return r=e(r),o=e(o),s=e(s),a.opacity=1,function(l){return a.r=r(l),a.g=o(l),a.b=s(l),a+""}}}var ku=Bi(Hi),Iu=Bi(Ri);function Ee(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Sr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Er=new RegExp(Sr.source,"g");function Ou(e){return function(){return e}}function Du(e){return function(t){return e(t)+""}}function _r(e,t){var n=Sr.lastIndex=Er.lastIndex=0,r,o,s,i=-1,a=[],l=[];for(e=e+"",t=t+"";(r=Sr.exec(e))&&(o=Er.exec(t));)(s=o.index)>n&&(s=t.slice(n,s),a[i]?a[i]+=s:a[++i]=s),(r=r[0])===(o=o[0])?a[i]?a[i]+=o:a[++i]=o:(a[++i]=null,l.push({i,x:Ee(r,o)})),n=Er.lastIndex;return n<t.length&&(s=t.slice(n),a[i]?a[i]+=s:a[++i]=s),a.length<2?l[0]?Du(l[0].x):Ou(t):(t=l.length,function(u){for(var c=0,f;c<t;++c)a[(f=l[c]).i]=f.x(u);return a.join("")})}var Vi=180/Math.PI,Tn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Nr(e,t,n,r,o,s){var i,a,l;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,i=-i),{translateX:o,translateY:s,rotate:Math.atan2(t,e)*Vi,skewX:Math.atan(l)*Vi,scaleX:i,scaleY:a}}var kn;function Fi(e){let t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Tn:Nr(t.a,t.b,t.c,t.d,t.e,t.f)}function Yi(e){return e==null?Tn:(kn||(kn=document.createElementNS("http://www.w3.org/2000/svg","g")),kn.setAttribute("transform",e),(e=kn.transform.baseVal.consolidate())?(e=e.matrix,Nr(e.a,e.b,e.c,e.d,e.e,e.f)):Tn)}function Xi(e,t,n,r){function o(u){return u.length?u.pop()+" ":""}function s(u,c,f,p,m,v){if(u!==f||c!==p){var y=m.push("translate(",null,t,null,n);v.push({i:y-4,x:Ee(u,f)},{i:y-2,x:Ee(c,p)})}else(f||p)&&m.push("translate("+f+t+p+n)}function i(u,c,f,p){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),p.push({i:f.push(o(f)+"rotate(",null,r)-2,x:Ee(u,c)})):c&&f.push(o(f)+"rotate("+c+r)}function a(u,c,f,p){u!==c?p.push({i:f.push(o(f)+"skewX(",null,r)-2,x:Ee(u,c)}):c&&f.push(o(f)+"skewX("+c+r)}function l(u,c,f,p,m,v){if(u!==f||c!==p){var y=m.push(o(m)+"scale(",null,",",null,")");v.push({i:y-4,x:Ee(u,f)},{i:y-2,x:Ee(c,p)})}else(f!==1||p!==1)&&m.push(o(m)+"scale("+f+","+p+")")}return function(u,c){var f=[],p=[];return u=e(u),c=e(c),s(u.translateX,u.translateY,c.translateX,c.translateY,f,p),i(u.rotate,c.rotate,f,p),a(u.skewX,c.skewX,f,p),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,f,p),u=c=null,function(m){for(var v=-1,y=p.length,E;++v<y;)f[(E=p[v]).i]=E.x(m);return f.join("")}}}var Cr=Xi(Fi,"px, ","px)","deg)"),Mr=Xi(Yi,", ",")",")");var Pu=1e-12;function Ui(e){return((e=Math.exp(e))+1/e)/2}function $u(e){return((e=Math.exp(e))-1/e)/2}function zu(e){return((e=Math.exp(2*e))-1)/(e+1)}var Ar=(function e(t,n,r){function o(s,i){var a=s[0],l=s[1],u=s[2],c=i[0],f=i[1],p=i[2],m=c-a,v=f-l,y=m*m+v*v,E,g;if(y<Pu)g=Math.log(p/u)/t,E=function(D){return[a+D*m,l+D*v,u*Math.exp(t*D*g)]};else{var w=Math.sqrt(y),C=(p*p-u*u+r*y)/(2*u*n*w),x=(p*p-u*u-r*y)/(2*p*n*w),N=Math.log(Math.sqrt(C*C+1)-C),M=Math.log(Math.sqrt(x*x+1)-x);g=(M-N)/t,E=function(D){var R=D*g,k=Ui(N),z=u/(n*w)*(k*zu(t*R+N)-$u(N));return[a+z*m,l+z*v,u*k/Ui(t*R+N)]}}return E.duration=g*1e3*t/Math.SQRT2,E}return o.rho=function(s){var i=Math.max(.001,+s),a=i*i,l=a*a;return e(i,a,l)},o})(Math.SQRT2,2,4);var Nt=0,Gt=0,Wt=0,Ki=1e3,In,jt,On=0,lt=0,Dn=0,Qt=typeof performance=="object"&&performance.now?performance:Date,Zi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function en(){return lt||(Zi(Hu),lt=Qt.now()+Dn)}function Hu(){lt=0}function Jt(){this._call=this._time=this._next=null}Jt.prototype=Pn.prototype={constructor:Jt,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?en():+n)+(t==null?0:+t),!this._next&&jt!==this&&(jt?jt._next=this:In=this,jt=this),this._call=e,this._time=n,Tr()},stop:function(){this._call&&(this._call=null,this._time=1/0,Tr())}};function Pn(e,t,n){var r=new Jt;return r.restart(e,t,n),r}function Wi(){en(),++Nt;for(var e=In,t;e;)(t=lt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Nt}function qi(){lt=(On=Qt.now())+Dn,Nt=Gt=0;try{Wi()}finally{Nt=0,Lu(),lt=0}}function Ru(){var e=Qt.now(),t=e-On;t>Ki&&(Dn-=t,On=e)}function Lu(){for(var e,t=In,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:In=n);jt=e,Tr(r)}function Tr(e){if(!Nt){Gt&&(Gt=clearTimeout(Gt));var t=e-lt;t>24?(e<1/0&&(Gt=setTimeout(qi,e-Qt.now()-Dn)),Wt&&(Wt=clearInterval(Wt))):(Wt||(On=Qt.now(),Wt=setInterval(Ru,Ki)),Nt=1,Zi(qi))}}function $n(e,t,n){var r=new Jt;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var Bu=rt("start","end","cancel","interrupt"),Vu=[],Qi=0,Gi=1,Hn=2,zn=3,ji=4,Rn=5,tn=6;function Ye(e,t,n,r,o,s){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;Fu(e,n,{name:t,index:r,group:o,on:Bu,tween:Vu,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Qi})}function nn(e,t){var n=se(e,t);if(n.state>Qi)throw new Error("too late; already scheduled");return n}function ae(e,t){var n=se(e,t);if(n.state>zn)throw new Error("too late; already running");return n}function se(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Fu(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=Pn(s,0,n.time);function s(u){n.state=Gi,n.timer.restart(i,n.delay,n.time),n.delay<=u&&i(u-n.delay)}function i(u){var c,f,p,m;if(n.state!==Gi)return l();for(c in r)if(m=r[c],m.name===n.name){if(m.state===zn)return $n(i);m.state===ji?(m.state=tn,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete r[c]):+c<t&&(m.state=tn,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete r[c])}if($n(function(){n.state===zn&&(n.state=ji,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=Hn,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Hn){for(n.state=zn,o=new Array(p=n.tween.length),c=0,f=-1;c<p;++c)(m=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(o[++f]=m);o.length=f+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Rn,1),f=-1,p=o.length;++f<p;)o[f].call(e,c);n.state===Rn&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=tn,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function ct(e,t){var n=e.__transition,r,o,s=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((r=n[i]).name!==t){s=!1;continue}o=r.state>Hn&&r.state<Rn,r.state=tn,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[i]}s&&delete e.__transition}}function Ji(e){return this.each(function(){ct(this,e)})}function Yu(e,t){var n,r;return function(){var o=ae(this,e),s=o.tween;if(s!==n){r=n=s;for(var i=0,a=r.length;i<a;++i)if(r[i].name===t){r=r.slice(),r.splice(i,1);break}}o.tween=r}}function Xu(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var s=ae(this,e),i=s.tween;if(i!==r){o=(r=i).slice();for(var a={name:t,value:n},l=0,u=o.length;l<u;++l)if(o[l].name===t){o[l]=a;break}l===u&&o.push(a)}s.tween=o}}function es(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=se(this.node(),n).tween,o=0,s=r.length,i;o<s;++o)if((i=r[o]).name===e)return i.value;return null}return this.each((t==null?Yu:Xu)(n,e,t))}function Ct(e,t,n){var r=e._id;return e.each(function(){var o=ae(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return se(o,r).value[t]}}function Ln(e,t){var n;return(typeof t=="number"?Ee:t instanceof Fe?An:(n=Fe(t))?(t=n,An):_r)(e,t)}function Uu(e){return function(){this.removeAttribute(e)}}function qu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ku(e,t,n){var r,o=n+"",s;return function(){var i=this.getAttribute(e);return i===o?null:i===r?s:s=t(r=i,n)}}function Zu(e,t,n){var r,o=n+"",s;return function(){var i=this.getAttributeNS(e.space,e.local);return i===o?null:i===r?s:s=t(r=i,n)}}function Wu(e,t,n){var r,o,s;return function(){var i,a=n(this),l;return a==null?void this.removeAttribute(e):(i=this.getAttribute(e),l=a+"",i===l?null:i===r&&l===o?s:(o=l,s=t(r=i,a)))}}function Gu(e,t,n){var r,o,s;return function(){var i,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),l=a+"",i===l?null:i===r&&l===o?s:(o=l,s=t(r=i,a)))}}function ts(e,t){var n=ze(e),r=n==="transform"?Mr:Ln;return this.attrTween(e,typeof t=="function"?(n.local?Gu:Wu)(n,r,Ct(this,"attr."+e,t)):t==null?(n.local?qu:Uu)(n):(n.local?Zu:Ku)(n,r,t))}function ju(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Qu(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Ju(e,t){var n,r;function o(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Qu(e,s)),n}return o._value=t,o}function ef(e,t){var n,r;function o(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&ju(e,s)),n}return o._value=t,o}function ns(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=ze(e);return this.tween(n,(r.local?Ju:ef)(r,t))}function tf(e,t){return function(){nn(this,e).delay=+t.apply(this,arguments)}}function nf(e,t){return t=+t,function(){nn(this,e).delay=t}}function rs(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?tf:nf)(t,e)):se(this.node(),t).delay}function rf(e,t){return function(){ae(this,e).duration=+t.apply(this,arguments)}}function of(e,t){return t=+t,function(){ae(this,e).duration=t}}function os(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?rf:of)(t,e)):se(this.node(),t).duration}function sf(e,t){if(typeof t!="function")throw new Error;return function(){ae(this,e).ease=t}}function is(e){var t=this._id;return arguments.length?this.each(sf(t,e)):se(this.node(),t).ease}function af(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ae(this,e).ease=n}}function ss(e){if(typeof e!="function")throw new Error;return this.each(af(this._id,e))}function as(e){typeof e!="function"&&(e=Bt(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var s=t[o],i=s.length,a=r[o]=[],l,u=0;u<i;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&a.push(l);return new de(r,this._parents,this._name,this._id)}function ls(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,s=Math.min(r,o),i=new Array(r),a=0;a<s;++a)for(var l=t[a],u=n[a],c=l.length,f=i[a]=new Array(c),p,m=0;m<c;++m)(p=l[m]||u[m])&&(f[m]=p);for(;a<r;++a)i[a]=t[a];return new de(i,this._parents,this._name,this._id)}function lf(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function cf(e,t,n){var r,o,s=lf(t)?nn:ae;return function(){var i=s(this,e),a=i.on;a!==r&&(o=(r=a).copy()).on(t,n),i.on=o}}function cs(e,t){var n=this._id;return arguments.length<2?se(this.node(),n).on.on(e):this.each(cf(n,e,t))}function uf(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function us(){return this.on("end.remove",uf(this._id))}function fs(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ot(e));for(var r=this._groups,o=r.length,s=new Array(o),i=0;i<o;++i)for(var a=r[i],l=a.length,u=s[i]=new Array(l),c,f,p=0;p<l;++p)(c=a[p])&&(f=e.call(c,c.__data__,p,a))&&("__data__"in c&&(f.__data__=c.__data__),u[p]=f,Ye(u[p],t,n,p,u,se(c,n)));return new de(s,this._parents,t,n)}function ds(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Lt(e));for(var r=this._groups,o=r.length,s=[],i=[],a=0;a<o;++a)for(var l=r[a],u=l.length,c,f=0;f<u;++f)if(c=l[f]){for(var p=e.call(c,c.__data__,f,l),m,v=se(c,n),y=0,E=p.length;y<E;++y)(m=p[y])&&Ye(m,t,n,y,p,v);s.push(p),i.push(c)}return new de(s,i,t,n)}var ff=He.prototype.constructor;function ps(){return new ff(this._groups,this._parents)}function df(e,t){var n,r,o;return function(){var s=Be(this,e),i=(this.style.removeProperty(e),Be(this,e));return s===i?null:s===n&&i===r?o:o=t(n=s,r=i)}}function hs(e){return function(){this.style.removeProperty(e)}}function pf(e,t,n){var r,o=n+"",s;return function(){var i=Be(this,e);return i===o?null:i===r?s:s=t(r=i,n)}}function hf(e,t,n){var r,o,s;return function(){var i=Be(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Be(this,e))),i===l?null:i===r&&l===o?s:(o=l,s=t(r=i,a))}}function mf(e,t){var n,r,o,s="style."+t,i="end."+s,a;return function(){var l=ae(this,e),u=l.on,c=l.value[s]==null?a||(a=hs(t)):void 0;(u!==n||o!==c)&&(r=(n=u).copy()).on(i,o=c),l.on=r}}function ms(e,t,n){var r=(e+="")=="transform"?Cr:Ln;return t==null?this.styleTween(e,df(e,r)).on("end.style."+e,hs(e)):typeof t=="function"?this.styleTween(e,hf(e,r,Ct(this,"style."+e,t))).each(mf(this._id,e)):this.styleTween(e,pf(e,r,t),n).on("end.style."+e,null)}function gf(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function yf(e,t,n){var r,o;function s(){var i=t.apply(this,arguments);return i!==o&&(r=(o=i)&&gf(e,i,n)),r}return s._value=t,s}function gs(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,yf(e,t,n??""))}function xf(e){return function(){this.textContent=e}}function wf(e){return function(){var t=e(this);this.textContent=t??""}}function ys(e){return this.tween("text",typeof e=="function"?wf(Ct(this,"text",e)):xf(e==null?"":e+""))}function vf(e){return function(t){this.textContent=e.call(this,t)}}function bf(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&vf(o)),t}return r._value=e,r}function xs(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,bf(e))}function ws(){for(var e=this._name,t=this._id,n=Bn(),r=this._groups,o=r.length,s=0;s<o;++s)for(var i=r[s],a=i.length,l,u=0;u<a;++u)if(l=i[u]){var c=se(l,t);Ye(l,e,n,u,i,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new de(r,this._parents,e,n)}function vs(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(s,i){var a={value:i},l={value:function(){--o===0&&s()}};n.each(function(){var u=ae(this,r),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),u.on=t}),o===0&&s()})}var Ef=0;function de(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function bs(e){return He().transition(e)}function Bn(){return++Ef}var Re=He.prototype;de.prototype=bs.prototype={constructor:de,select:fs,selectAll:ds,selectChild:Re.selectChild,selectChildren:Re.selectChildren,filter:as,merge:ls,selection:ps,transition:ws,call:Re.call,nodes:Re.nodes,node:Re.node,size:Re.size,empty:Re.empty,each:Re.each,on:cs,attr:ts,attrTween:ns,style:ms,styleTween:gs,text:ys,textTween:xs,remove:us,tween:es,delay:rs,duration:os,ease:is,easeVarying:ss,end:vs,[Symbol.iterator]:Re[Symbol.iterator]};function Vn(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Sf={time:null,delay:0,duration:250,ease:Vn};function _f(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Es(e){var t,n;e instanceof de?(t=e._id,e=e._name):(t=Bn(),(n=Sf).time=en(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,s=0;s<o;++s)for(var i=r[s],a=i.length,l,u=0;u<a;++u)(l=i[u])&&Ye(l,e,t,u,i,n||_f(l,t));return new de(r,this._parents,e,t)}He.prototype.interrupt=Ji;He.prototype.transition=Es;var rn=e=>()=>e;function kr(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function Ae(e,t,n){this.k=e,this.x=t,this.y=n}Ae.prototype={constructor:Ae,scale:function(e){return e===1?this:new Ae(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ae(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Se=new Ae(1,0,0);Ir.prototype=Ae.prototype;function Ir(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Se;return e.__zoom}function Fn(e){e.stopImmediatePropagation()}function Mt(e){e.preventDefault(),e.stopImmediatePropagation()}function Nf(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Cf(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Ss(){return this.__zoom||Se}function Mf(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Af(){return navigator.maxTouchPoints||"ontouchstart"in this}function Tf(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function Or(){var e=Nf,t=Cf,n=Tf,r=Mf,o=Af,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],a=250,l=Ar,u=rt("start","zoom","end"),c,f,p,m=500,v=150,y=0,E=10;function g(d){d.property("__zoom",Ss).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",z).filter(o).on("touchstart.zoom",H).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",$).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(d,_,b,A){var O=d.selection?d.selection():d;O.property("__zoom",Ss),d!==O?N(d,_,b,A):O.interrupt().each(function(){M(this,arguments).event(A).start().zoom(null,typeof _=="function"?_.apply(this,arguments):_).end()})},g.scaleBy=function(d,_,b,A){g.scaleTo(d,function(){var O=this.__zoom.k,S=typeof _=="function"?_.apply(this,arguments):_;return O*S},b,A)},g.scaleTo=function(d,_,b,A){g.transform(d,function(){var O=t.apply(this,arguments),S=this.__zoom,T=b==null?x(O):typeof b=="function"?b.apply(this,arguments):b,I=S.invert(T),P=typeof _=="function"?_.apply(this,arguments):_;return n(C(w(S,P),T,I),O,i)},b,A)},g.translateBy=function(d,_,b,A){g.transform(d,function(){return n(this.__zoom.translate(typeof _=="function"?_.apply(this,arguments):_,typeof b=="function"?b.apply(this,arguments):b),t.apply(this,arguments),i)},null,A)},g.translateTo=function(d,_,b,A,O){g.transform(d,function(){var S=t.apply(this,arguments),T=this.__zoom,I=A==null?x(S):typeof A=="function"?A.apply(this,arguments):A;return n(Se.translate(I[0],I[1]).scale(T.k).translate(typeof _=="function"?-_.apply(this,arguments):-_,typeof b=="function"?-b.apply(this,arguments):-b),S,i)},A,O)};function w(d,_){return _=Math.max(s[0],Math.min(s[1],_)),_===d.k?d:new Ae(_,d.x,d.y)}function C(d,_,b){var A=_[0]-b[0]*d.k,O=_[1]-b[1]*d.k;return A===d.x&&O===d.y?d:new Ae(d.k,A,O)}function x(d){return[(+d[0][0]+ +d[1][0])/2,(+d[0][1]+ +d[1][1])/2]}function N(d,_,b,A){d.on("start.zoom",function(){M(this,arguments).event(A).start()}).on("interrupt.zoom end.zoom",function(){M(this,arguments).event(A).end()}).tween("zoom",function(){var O=this,S=arguments,T=M(O,S).event(A),I=t.apply(O,S),P=b==null?x(I):typeof b=="function"?b.apply(O,S):b,V=Math.max(I[1][0]-I[0][0],I[1][1]-I[0][1]),B=O.__zoom,K=typeof _=="function"?_.apply(O,S):_,W=l(B.invert(P).concat(V/B.k),K.invert(P).concat(V/K.k));return function(G){if(G===1)G=K;else{var j=W(G),te=V/j[2];G=new Ae(te,P[0]-j[0]*te,P[1]-j[1]*te)}T.zoom(null,G)}})}function M(d,_,b){return!b&&d.__zooming||new D(d,_)}function D(d,_){this.that=d,this.args=_,this.active=0,this.sourceEvent=null,this.extent=t.apply(d,_),this.taps=0}D.prototype={event:function(d){return d&&(this.sourceEvent=d),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(d,_){return this.mouse&&d!=="mouse"&&(this.mouse[1]=_.invert(this.mouse[0])),this.touch0&&d!=="touch"&&(this.touch0[1]=_.invert(this.touch0[0])),this.touch1&&d!=="touch"&&(this.touch1[1]=_.invert(this.touch1[0])),this.that.__zoom=_,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(d){var _=fe(this.that).datum();u.call(d,this.that,new kr(d,{sourceEvent:this.sourceEvent,target:g,type:d,transform:this.that.__zoom,dispatch:u}),_)}};function R(d,..._){if(!e.apply(this,arguments))return;var b=M(this,_).event(d),A=this.__zoom,O=Math.max(s[0],Math.min(s[1],A.k*Math.pow(2,r.apply(this,arguments)))),S=ye(d);if(b.wheel)(b.mouse[0][0]!==S[0]||b.mouse[0][1]!==S[1])&&(b.mouse[1]=A.invert(b.mouse[0]=S)),clearTimeout(b.wheel);else{if(A.k===O)return;b.mouse=[S,A.invert(S)],ct(this),b.start()}Mt(d),b.wheel=setTimeout(T,v),b.zoom("mouse",n(C(w(A,O),b.mouse[0],b.mouse[1]),b.extent,i));function T(){b.wheel=null,b.end()}}function k(d,..._){if(p||!e.apply(this,arguments))return;var b=d.currentTarget,A=M(this,_,!0).event(d),O=fe(d.view).on("mousemove.zoom",P,!0).on("mouseup.zoom",V,!0),S=ye(d,b),T=d.clientX,I=d.clientY;Ft(d.view),Fn(d),A.mouse=[S,this.__zoom.invert(S)],ct(this),A.start();function P(B){if(Mt(B),!A.moved){var K=B.clientX-T,W=B.clientY-I;A.moved=K*K+W*W>y}A.event(B).zoom("mouse",n(C(A.that.__zoom,A.mouse[0]=ye(B,b),A.mouse[1]),A.extent,i))}function V(B){O.on("mousemove.zoom mouseup.zoom",null),Yt(B.view,A.moved),Mt(B),A.event(B).end()}}function z(d,..._){if(e.apply(this,arguments)){var b=this.__zoom,A=ye(d.changedTouches?d.changedTouches[0]:d,this),O=b.invert(A),S=b.k*(d.shiftKey?.5:2),T=n(C(w(b,S),A,O),t.apply(this,_),i);Mt(d),a>0?fe(this).transition().duration(a).call(N,T,A,d):fe(this).call(g.transform,T,A,d)}}function H(d,..._){if(e.apply(this,arguments)){var b=d.touches,A=b.length,O=M(this,_,d.changedTouches.length===A).event(d),S,T,I,P;for(Fn(d),T=0;T<A;++T)I=b[T],P=ye(I,this),P=[P,this.__zoom.invert(P),I.identifier],O.touch0?!O.touch1&&O.touch0[2]!==P[2]&&(O.touch1=P,O.taps=0):(O.touch0=P,S=!0,O.taps=1+!!c);c&&(c=clearTimeout(c)),S&&(O.taps<2&&(f=P[0],c=setTimeout(function(){c=null},m)),ct(this),O.start())}}function L(d,..._){if(this.__zooming){var b=M(this,_).event(d),A=d.changedTouches,O=A.length,S,T,I,P;for(Mt(d),S=0;S<O;++S)T=A[S],I=ye(T,this),b.touch0&&b.touch0[2]===T.identifier?b.touch0[0]=I:b.touch1&&b.touch1[2]===T.identifier&&(b.touch1[0]=I);if(T=b.that.__zoom,b.touch1){var V=b.touch0[0],B=b.touch0[1],K=b.touch1[0],W=b.touch1[1],G=(G=K[0]-V[0])*G+(G=K[1]-V[1])*G,j=(j=W[0]-B[0])*j+(j=W[1]-B[1])*j;T=w(T,Math.sqrt(G/j)),I=[(V[0]+K[0])/2,(V[1]+K[1])/2],P=[(B[0]+W[0])/2,(B[1]+W[1])/2]}else if(b.touch0)I=b.touch0[0],P=b.touch0[1];else return;b.zoom("touch",n(C(T,I,P),b.extent,i))}}function $(d,..._){if(this.__zooming){var b=M(this,_).event(d),A=d.changedTouches,O=A.length,S,T;for(Fn(d),p&&clearTimeout(p),p=setTimeout(function(){p=null},m),S=0;S<O;++S)T=A[S],b.touch0&&b.touch0[2]===T.identifier?delete b.touch0:b.touch1&&b.touch1[2]===T.identifier&&delete b.touch1;if(b.touch1&&!b.touch0&&(b.touch0=b.touch1,delete b.touch1),b.touch0)b.touch0[1]=this.__zoom.invert(b.touch0[0]);else if(b.end(),b.taps===2&&(T=ye(T,this),Math.hypot(f[0]-T[0],f[1]-T[1])<E)){var I=fe(this).on("dblclick.zoom");I&&I.apply(this,arguments)}}}return g.wheelDelta=function(d){return arguments.length?(r=typeof d=="function"?d:rn(+d),g):r},g.filter=function(d){return arguments.length?(e=typeof d=="function"?d:rn(!!d),g):e},g.touchable=function(d){return arguments.length?(o=typeof d=="function"?d:rn(!!d),g):o},g.extent=function(d){return arguments.length?(t=typeof d=="function"?d:rn([[+d[0][0],+d[0][1]],[+d[1][0],+d[1][1]]]),g):t},g.scaleExtent=function(d){return arguments.length?(s[0]=+d[0],s[1]=+d[1],g):[s[0],s[1]]},g.translateExtent=function(d){return arguments.length?(i[0][0]=+d[0][0],i[1][0]=+d[1][0],i[0][1]=+d[0][1],i[1][1]=+d[1][1],g):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},g.constrain=function(d){return arguments.length?(n=d,g):n},g.duration=function(d){return arguments.length?(a=+d,g):a},g.interpolate=function(d){return arguments.length?(l=d,g):l},g.on=function(){var d=u.on.apply(u,arguments);return d===u?g:d},g.clickDistance=function(d){return arguments.length?(y=(d=+d)*d,g):Math.sqrt(y)},g.tapDistance=function(d){return arguments.length?(E=+d,g):E},g}var Df=nt(As(),1),jn=(0,h.createContext)(null),Pf=jn.Provider,De={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Qs=De.error001();function oe(e,t){let n=(0,h.useContext)(jn);if(n===null)throw new Error(Qs);return dr(n,e,t)}var le=()=>{let e=(0,h.useContext)(jn);if(e===null)throw new Error(Qs);return(0,h.useMemo)(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},$f=e=>e.userSelectionActive?"none":"all";function zf({position:e,children:t,className:n,style:r,...o}){let s=oe($f),i=`${e}`.split("-");return h.default.createElement("div",{className:ge(["react-flow__panel",n,...i]),style:{...r,pointerEvents:s},...o},t)}function Hf({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:h.default.createElement(zf,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},h.default.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}var Rf=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:o=!0,labelBgStyle:s={},labelBgPadding:i=[2,4],labelBgBorderRadius:a=2,children:l,className:u,...c})=>{let f=(0,h.useRef)(null),[p,m]=(0,h.useState)({x:0,y:0,width:0,height:0}),v=ge(["react-flow__edge-textwrapper",u]);return(0,h.useEffect)(()=>{if(f.current){let y=f.current.getBBox();m({x:y.x,y:y.y,width:y.width,height:y.height})}},[n]),typeof n>"u"||!n?null:h.default.createElement("g",{transform:`translate(${e-p.width/2} ${t-p.height/2})`,className:v,visibility:p.width?"visible":"hidden",...c},o&&h.default.createElement("rect",{width:p.width+2*i[0],x:-i[0],y:-i[1],height:p.height+2*i[1],className:"react-flow__edge-textbg",style:s,rx:a,ry:a}),h.default.createElement("text",{className:"react-flow__edge-text",y:p.height/2,dy:"0.3em",ref:f,style:r},n),l)},Lf=(0,h.memo)(Rf),qr=e=>({width:e.offsetWidth,height:e.offsetHeight}),$t=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Kr=(e={x:0,y:0},t)=>({x:$t(e.x,t[0][0],t[1][0]),y:$t(e.y,t[0][1],t[1][1])}),Ts=(e,t,n)=>e<t?$t(Math.abs(e-t),1,50)/50:e>n?-$t(Math.abs(e-n),1,50)/50:0,Js=(e,t)=>{let n=Ts(e.x,35,t.width-35)*20,r=Ts(e.y,35,t.height-35)*20;return[n,r]},ea=e=>e.getRootNode?.()||window?.document,Bf=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Zr=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Vf=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),ks=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0});var Rr=(e,t)=>{let n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Ff=e=>_e(e.width)&&_e(e.height)&&_e(e.x)&&_e(e.y),_e=e=>!isNaN(e)&&isFinite(e),re=Symbol.for("internals"),ta=["Enter"," ","Escape"],na=(e,t)=>{},Yf=e=>"nativeEvent"in e;function Lr(e){let n=(Yf(e)?e.nativeEvent:e).composedPath?.()?.[0]||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}var ra=e=>"clientX"in e,Ze=(e,t)=>{let n=ra(e),r=n?e.clientX:e.touches?.[0].clientX,o=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:o-(t?.top??0)}},Zn=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,fn=({id:e,path:t,labelX:n,labelY:r,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:f,markerStart:p,interactionWidth:m=20})=>h.default.createElement(h.default.Fragment,null,h.default.createElement("path",{id:e,style:c,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:p}),m&&h.default.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:m,className:"react-flow__edge-interaction"}),o&&_e(n)&&_e(r)?h.default.createElement(Lf,{x:n,y:r,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u}):null);fn.displayName="BaseEdge";function sn(e,t,n){return n===void 0?n:r=>{let o=t().edges.find(s=>s.id===e);o&&n(r,{...o})}}function oa({sourceX:e,sourceY:t,targetX:n,targetY:r}){let o=Math.abs(n-e)/2,s=n<e?n+o:n-o,i=Math.abs(r-t)/2,a=r<t?r+i:r-i;return[s,a,o,i]}function ia({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:s,targetControlX:i,targetControlY:a}){let l=e*.125+o*.375+i*.375+n*.125,u=t*.125+s*.375+a*.375+r*.125,c=Math.abs(l-e),f=Math.abs(u-t);return[l,u,c,f]}var dt;(function(e){e.Strict="strict",e.Loose="loose"})(dt||(dt={}));var ft;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(ft||(ft={}));var cn;(function(e){e.Partial="partial",e.Full="full"})(cn||(cn={}));var Ke;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Ke||(Ke={}));var Wn;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Wn||(Wn={}));var F;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(F||(F={}));function Is({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===F.Left||e===F.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function sa({sourceX:e,sourceY:t,sourcePosition:n=F.Bottom,targetX:r,targetY:o,targetPosition:s=F.Top}){let[i,a]=Is({pos:n,x1:e,y1:t,x2:r,y2:o}),[l,u]=Is({pos:s,x1:r,y1:o,x2:e,y2:t}),[c,f,p,m]=ia({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:i,sourceControlY:a,targetControlX:l,targetControlY:u});return[`M${e},${t} C${i},${a} ${l},${u} ${r},${o}`,c,f,p,m]}var Wr=(0,h.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=F.Bottom,targetPosition:s=F.Top,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:f,style:p,markerEnd:m,markerStart:v,interactionWidth:y})=>{let[E,g,w]=sa({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:s});return h.default.createElement(fn,{path:E,labelX:g,labelY:w,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:f,style:p,markerEnd:m,markerStart:v,interactionWidth:y})});Wr.displayName="SimpleBezierEdge";var Os={[F.Left]:{x:-1,y:0},[F.Right]:{x:1,y:0},[F.Top]:{x:0,y:-1},[F.Bottom]:{x:0,y:1}},Xf=({source:e,sourcePosition:t=F.Bottom,target:n})=>t===F.Left||t===F.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Ds=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Uf({source:e,sourcePosition:t=F.Bottom,target:n,targetPosition:r=F.Top,center:o,offset:s}){let i=Os[t],a=Os[r],l={x:e.x+i.x*s,y:e.y+i.y*s},u={x:n.x+a.x*s,y:n.y+a.y*s},c=Xf({source:l,sourcePosition:t,target:u}),f=c.x!==0?"x":"y",p=c[f],m=[],v,y,E={x:0,y:0},g={x:0,y:0},[w,C,x,N]=oa({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(i[f]*a[f]===-1){v=o.x??w,y=o.y??C;let D=[{x:v,y:l.y},{x:v,y:u.y}],R=[{x:l.x,y},{x:u.x,y}];i[f]===p?m=f==="x"?D:R:m=f==="x"?R:D}else{let D=[{x:l.x,y:u.y}],R=[{x:u.x,y:l.y}];if(f==="x"?m=i.x===p?R:D:m=i.y===p?D:R,t===r){let $=Math.abs(e[f]-n[f]);if($<=s){let d=Math.min(s-1,s-$);i[f]===p?E[f]=(l[f]>e[f]?-1:1)*d:g[f]=(u[f]>n[f]?-1:1)*d}}if(t!==r){let $=f==="x"?"y":"x",d=i[f]===a[$],_=l[$]>u[$],b=l[$]<u[$];(i[f]===1&&(!d&&_||d&&b)||i[f]!==1&&(!d&&b||d&&_))&&(m=f==="x"?D:R)}let k={x:l.x+E.x,y:l.y+E.y},z={x:u.x+g.x,y:u.y+g.y},H=Math.max(Math.abs(k.x-m[0].x),Math.abs(z.x-m[0].x)),L=Math.max(Math.abs(k.y-m[0].y),Math.abs(z.y-m[0].y));H>=L?(v=(k.x+z.x)/2,y=m[0].y):(v=m[0].x,y=(k.y+z.y)/2)}return[[e,{x:l.x+E.x,y:l.y+E.y},...m,{x:u.x+g.x,y:u.y+g.y},n],v,y,x,N]}function qf(e,t,n,r){let o=Math.min(Ds(e,t)/2,Ds(t,n)/2,r),{x:s,y:i}=t;if(e.x===s&&s===n.x||e.y===i&&i===n.y)return`L${s} ${i}`;if(e.y===i){let u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${s+o*u},${i}Q ${s},${i} ${s},${i+o*c}`}let a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${s},${i+o*l}Q ${s},${i} ${s+o*a},${i}`}function Br({sourceX:e,sourceY:t,sourcePosition:n=F.Bottom,targetX:r,targetY:o,targetPosition:s=F.Top,borderRadius:i=5,centerX:a,centerY:l,offset:u=20}){let[c,f,p,m,v]=Uf({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:s,center:{x:a,y:l},offset:u});return[c.reduce((E,g,w)=>{let C="";return w>0&&w<c.length-1?C=qf(c[w-1],g,c[w+1],i):C=`${w===0?"M":"L"}${g.x} ${g.y}`,E+=C,E},""),f,p,m,v]}var Qn=(0,h.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:c,sourcePosition:f=F.Bottom,targetPosition:p=F.Top,markerEnd:m,markerStart:v,pathOptions:y,interactionWidth:E})=>{let[g,w,C]=Br({sourceX:e,sourceY:t,sourcePosition:f,targetX:n,targetY:r,targetPosition:p,borderRadius:y?.borderRadius,offset:y?.offset});return h.default.createElement(fn,{path:g,labelX:w,labelY:C,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:m,markerStart:v,interactionWidth:E})});Qn.displayName="SmoothStepEdge";var Gr=(0,h.memo)(e=>h.default.createElement(Qn,{...e,pathOptions:(0,h.useMemo)(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])}));Gr.displayName="StepEdge";function Kf({sourceX:e,sourceY:t,targetX:n,targetY:r}){let[o,s,i,a]=oa({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,s,i,a]}var jr=(0,h.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:f,markerStart:p,interactionWidth:m})=>{let[v,y,E]=Kf({sourceX:e,sourceY:t,targetX:n,targetY:r});return h.default.createElement(fn,{path:v,labelX:y,labelY:E,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:f,markerStart:p,interactionWidth:m})});jr.displayName="StraightEdge";function Xn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Ps({pos:e,x1:t,y1:n,x2:r,y2:o,c:s}){switch(e){case F.Left:return[t-Xn(t-r,s),n];case F.Right:return[t+Xn(r-t,s),n];case F.Top:return[t,n-Xn(n-o,s)];case F.Bottom:return[t,n+Xn(o-n,s)]}}function aa({sourceX:e,sourceY:t,sourcePosition:n=F.Bottom,targetX:r,targetY:o,targetPosition:s=F.Top,curvature:i=.25}){let[a,l]=Ps({pos:n,x1:e,y1:t,x2:r,y2:o,c:i}),[u,c]=Ps({pos:s,x1:r,y1:o,x2:e,y2:t,c:i}),[f,p,m,v]=ia({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:a,sourceControlY:l,targetControlX:u,targetControlY:c});return[`M${e},${t} C${a},${l} ${u},${c} ${r},${o}`,f,p,m,v]}var Gn=(0,h.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=F.Bottom,targetPosition:s=F.Top,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:f,style:p,markerEnd:m,markerStart:v,pathOptions:y,interactionWidth:E})=>{let[g,w,C]=aa({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:s,curvature:y?.curvature});return h.default.createElement(fn,{path:g,labelX:w,labelY:C,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:f,style:p,markerEnd:m,markerStart:v,interactionWidth:E})});Gn.displayName="BezierEdge";var Qr=(0,h.createContext)(null),Zf=Qr.Provider;Qr.Consumer;var Wf=()=>(0,h.useContext)(Qr),Gf=e=>"id"in e&&"source"in e&&"target"in e;var jf=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,Vr=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,Qf=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Jf=(e,t)=>{if(!e.source||!e.target)return na("006",De.error006()),t;let n;return Gf(e)?n={...e}:n={...e,id:jf(e)},Qf(n,t)?t:t.concat(n)};var Fr=({x:e,y:t},[n,r,o],s,[i,a])=>{let l={x:(e-n)/o,y:(t-r)/o};return s?{x:i*Math.round(l.x/i),y:a*Math.round(l.y/a)}:l},la=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r}),Dt=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};let n=(e.width??0)*t[0],r=(e.height??0)*t[1],o={x:e.position.x-n,y:e.position.y-r};return{...o,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:o}},Jr=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};let n=e.reduce((r,o)=>{let{x:s,y:i}=Dt(o,t).positionAbsolute;return Bf(r,Zr({x:s,y:i,width:o.width||0,height:o.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Vf(n)};var ca=(e,t,[n,r,o]=[0,0,1],s=!1,i=!1,a=[0,0])=>{let l={x:(t.x-n)/o,y:(t.y-r)/o,width:t.width/o,height:t.height/o},u=[];return e.forEach(c=>{let{width:f,height:p,selectable:m=!0,hidden:v=!1}=c;if(i&&!m||v)return!1;let{positionAbsolute:y}=Dt(c,a),E={x:y.x,y:y.y,width:f||0,height:p||0},g=Rr(l,E),w=typeof f>"u"||typeof p>"u"||f===null||p===null,C=s&&g>0,x=(f||0)*(p||0);(w||C||g>=x||c.dragging)&&u.push(c)}),u},ua=(e,t)=>{let n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))};var fa=(e,t,n,r,o,s=.1)=>{let i=t/(e.width*(1+s)),a=n/(e.height*(1+s)),l=Math.min(i,a),u=$t(l,r,o),c=e.x+e.width/2,f=e.y+e.height/2,p=t/2-c*u,m=n/2-f*u;return{x:p,y:m,zoom:u}},ut=(e,t=0)=>e.transition().duration(t);function $s(e,t,n,r){return(t[n]||[]).reduce((o,s)=>(`${e.id}-${s.id}-${n}`!==r&&o.push({id:s.id||null,type:n,nodeId:e.id,x:(e.positionAbsolute?.x??0)+s.x+s.width/2,y:(e.positionAbsolute?.y??0)+s.y+s.height/2}),o),[])}function ed(e,t,n,r,o,s){let{x:i,y:a}=Ze(e),u=t.elementsFromPoint(i,a).find(v=>v.classList.contains("react-flow__handle"));if(u){let v=u.getAttribute("data-nodeid");if(v){let y=eo(void 0,u),E=u.getAttribute("data-handleid"),g=s({nodeId:v,id:E,type:y});if(g){let w=o.find(C=>C.nodeId===v&&C.type===y&&C.id===E);return{handle:{id:E,type:y,nodeId:v,x:w?.x||n.x,y:w?.y||n.y},validHandleResult:g}}}}let c=[],f=1/0;if(o.forEach(v=>{let y=Math.sqrt((v.x-n.x)**2+(v.y-n.y)**2);if(y<=r){let E=s(v);y<=f&&(y<f?c=[{handle:v,validHandleResult:E}]:y===f&&c.push({handle:v,validHandleResult:E}),f=y)}}),!c.length)return{handle:null,validHandleResult:da()};if(c.length===1)return c[0];let p=c.some(({validHandleResult:v})=>v.isValid),m=c.some(({handle:v})=>v.type==="target");return c.find(({handle:v,validHandleResult:y})=>m?v.type==="target":p?y.isValid:!0)||c[0]}var td={source:null,target:null,sourceHandle:null,targetHandle:null},da=()=>({handleDomNode:null,isValid:!1,connection:td,endHandle:null});function pa(e,t,n,r,o,s,i){let a=o==="target",l=i.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),u={...da(),handleDomNode:l};if(l){let c=eo(void 0,l),f=l.getAttribute("data-nodeid"),p=l.getAttribute("data-handleid"),m=l.classList.contains("connectable"),v=l.classList.contains("connectableend"),y={source:a?f:n,sourceHandle:a?p:r,target:a?n:f,targetHandle:a?r:p};u.connection=y,m&&v&&(t===dt.Strict?a&&c==="source"||!a&&c==="target":f!==n||p!==r)&&(u.endHandle={nodeId:f,handleId:p,type:c},u.isValid=s(y))}return u}function nd({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((o,s)=>{if(s[re]){let{handleBounds:i}=s[re],a=[],l=[];i&&(a=$s(s,i,"source",`${t}-${n}-${r}`),l=$s(s,i,"target",`${t}-${n}-${r}`)),o.push(...a,...l)}return o},[])}function eo(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function Dr(e){e?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function rd(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function ha({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:o,getState:s,setState:i,isValidConnection:a,edgeUpdaterType:l,onReconnectEnd:u}){let c=ea(e.target),{connectionMode:f,domNode:p,autoPanOnConnect:m,connectionRadius:v,onConnectStart:y,panBy:E,getNodes:g,cancelConnection:w}=s(),C=0,x,{x:N,y:M}=Ze(e),D=c?.elementFromPoint(N,M),R=eo(l,D),k=p?.getBoundingClientRect();if(!k||!R)return;let z,H=Ze(e,k),L=!1,$=null,d=!1,_=null,b=nd({nodes:g(),nodeId:n,handleId:t,handleType:R}),A=()=>{if(!m)return;let[T,I]=Js(H,k);E({x:T,y:I}),C=requestAnimationFrame(A)};i({connectionPosition:H,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:R,connectionStartHandle:{nodeId:n,handleId:t,type:R},connectionEndHandle:null}),y?.(e,{nodeId:n,handleId:t,handleType:R});function O(T){let{transform:I}=s();H=Ze(T,k);let{handle:P,validHandleResult:V}=ed(T,c,Fr(H,I,!1,[1,1]),v,b,B=>pa(B,f,n,t,o?"target":"source",a,c));if(x=P,L||(A(),L=!0),_=V.handleDomNode,$=V.connection,d=V.isValid,i({connectionPosition:x&&d?la({x:x.x,y:x.y},I):H,connectionStatus:rd(!!x,d),connectionEndHandle:V.endHandle}),!x&&!d&&!_)return Dr(z);$.source!==$.target&&_&&(Dr(z),z=_,_.classList.add("connecting","react-flow__handle-connecting"),_.classList.toggle("valid",d),_.classList.toggle("react-flow__handle-valid",d))}function S(T){(x||_)&&$&&d&&r?.($),s().onConnectEnd?.(T),l&&u?.(T),Dr(z),w(),cancelAnimationFrame(C),L=!1,d=!1,$=null,_=null,c.removeEventListener("mousemove",O),c.removeEventListener("mouseup",S),c.removeEventListener("touchmove",O),c.removeEventListener("touchend",S)}c.addEventListener("mousemove",O),c.addEventListener("mouseup",S),c.addEventListener("touchmove",O),c.addEventListener("touchend",S)}var zs=()=>!0,od=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),id=(e,t,n)=>r=>{let{connectionStartHandle:o,connectionEndHandle:s,connectionClickStartHandle:i}=r;return{connecting:o?.nodeId===e&&o?.handleId===t&&o?.type===n||s?.nodeId===e&&s?.handleId===t&&s?.type===n,clickConnecting:i?.nodeId===e&&i?.handleId===t&&i?.type===n}},ma=(0,h.forwardRef)(({type:e="source",position:t=F.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:s=!0,id:i,onConnect:a,children:l,className:u,onMouseDown:c,onTouchStart:f,...p},m)=>{let v=i||null,y=e==="target",E=le(),g=Wf(),{connectOnClick:w,noPanClassName:C}=oe(od,ue),{connecting:x,clickConnecting:N}=oe(id(g,v,e),ue);g||E.getState().onError?.("010",De.error010());let M=k=>{let{defaultEdgeOptions:z,onConnect:H,hasDefaultEdges:L}=E.getState(),$={...z,...k};if(L){let{edges:d,setEdges:_}=E.getState();_(Jf($,d))}H?.($),a?.($)},D=k=>{if(!g)return;let z=ra(k);o&&(z&&k.button===0||!z)&&ha({event:k,handleId:v,nodeId:g,onConnect:M,isTarget:y,getState:E.getState,setState:E.setState,isValidConnection:n||E.getState().isValidConnection||zs}),z?c?.(k):f?.(k)},R=k=>{let{onClickConnectStart:z,onClickConnectEnd:H,connectionClickStartHandle:L,connectionMode:$,isValidConnection:d}=E.getState();if(!g||!L&&!o)return;if(!L){z?.(k,{nodeId:g,handleId:v,handleType:e}),E.setState({connectionClickStartHandle:{nodeId:g,type:e,handleId:v}});return}let _=ea(k.target),b=n||d||zs,{connection:A,isValid:O}=pa({nodeId:g,id:v,type:e},$,L.nodeId,L.handleId||null,L.type,b,_);O&&M(A),H?.(k),E.setState({connectionClickStartHandle:null})};return h.default.createElement("div",{"data-handleid":v,"data-nodeid":g,"data-handlepos":t,"data-id":`${g}-${v}-${e}`,className:ge(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",C,u,{source:!y,target:y,connectable:r,connectablestart:o,connectableend:s,connecting:N,connectionindicator:r&&(o&&!x||s&&x)}]),onMouseDown:D,onTouchStart:D,onClick:w?R:void 0,ref:m,...p},l)});ma.displayName="Handle";var pt=(0,h.memo)(ma),ga=({data:e,isConnectable:t,targetPosition:n=F.Top,sourcePosition:r=F.Bottom})=>h.default.createElement(h.default.Fragment,null,h.default.createElement(pt,{type:"target",position:n,isConnectable:t}),e?.label,h.default.createElement(pt,{type:"source",position:r,isConnectable:t}));ga.displayName="DefaultNode";var Yr=(0,h.memo)(ga),ya=({data:e,isConnectable:t,sourcePosition:n=F.Bottom})=>h.default.createElement(h.default.Fragment,null,e?.label,h.default.createElement(pt,{type:"source",position:n,isConnectable:t}));ya.displayName="InputNode";var xa=(0,h.memo)(ya),wa=({data:e,isConnectable:t,targetPosition:n=F.Top})=>h.default.createElement(h.default.Fragment,null,h.default.createElement(pt,{type:"target",position:n,isConnectable:t}),e?.label);wa.displayName="OutputNode";var va=(0,h.memo)(wa),to=()=>null;to.displayName="GroupNode";var sd=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),Un=e=>e.id;function ad(e,t){return ue(e.selectedNodes.map(Un),t.selectedNodes.map(Un))&&ue(e.selectedEdges.map(Un),t.selectedEdges.map(Un))}var ba=(0,h.memo)(({onSelectionChange:e})=>{let t=le(),{selectedNodes:n,selectedEdges:r}=oe(sd,ad);return(0,h.useEffect)(()=>{let o={nodes:n,edges:r};e?.(o),t.getState().onSelectionChange.forEach(s=>s(o))},[n,r,e]),null});ba.displayName="SelectionListener";var ld=e=>!!e.onSelectionChange;function cd({onSelectionChange:e}){let t=oe(ld);return e||t?h.default.createElement(ba,{onSelectionChange:e}):null}var ud=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function At(e,t){(0,h.useEffect)(()=>{typeof e<"u"&&t(e)},[e])}function Z(e,t,n){(0,h.useEffect)(()=>{typeof t<"u"&&n({[e]:t})},[t])}var fd=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:o,onConnectStart:s,onConnectEnd:i,onClickConnectStart:a,onClickConnectEnd:l,nodesDraggable:u,nodesConnectable:c,nodesFocusable:f,edgesFocusable:p,edgesUpdatable:m,elevateNodesOnSelect:v,minZoom:y,maxZoom:E,nodeExtent:g,onNodesChange:w,onEdgesChange:C,elementsSelectable:x,connectionMode:N,snapGrid:M,snapToGrid:D,translateExtent:R,connectOnClick:k,defaultEdgeOptions:z,fitView:H,fitViewOptions:L,onNodesDelete:$,onEdgesDelete:d,onNodeDrag:_,onNodeDragStart:b,onNodeDragStop:A,onSelectionDrag:O,onSelectionDragStart:S,onSelectionDragStop:T,noPanClassName:I,nodeOrigin:P,rfId:V,autoPanOnConnect:B,autoPanOnNodeDrag:K,onError:W,connectionRadius:G,isValidConnection:j,nodeDragThreshold:te})=>{let{setNodes:Q,setEdges:Ne,setDefaultNodesAndEdges:ve,setMinZoom:Ce,setMaxZoom:be,setTranslateExtent:ie,setNodeExtent:Te,reset:J}=oe(ud,ue),Y=le();return(0,h.useEffect)(()=>{let we=r?.map(We=>({...We,...z}));return ve(n,we),()=>{J()}},[]),Z("defaultEdgeOptions",z,Y.setState),Z("connectionMode",N,Y.setState),Z("onConnect",o,Y.setState),Z("onConnectStart",s,Y.setState),Z("onConnectEnd",i,Y.setState),Z("onClickConnectStart",a,Y.setState),Z("onClickConnectEnd",l,Y.setState),Z("nodesDraggable",u,Y.setState),Z("nodesConnectable",c,Y.setState),Z("nodesFocusable",f,Y.setState),Z("edgesFocusable",p,Y.setState),Z("edgesUpdatable",m,Y.setState),Z("elementsSelectable",x,Y.setState),Z("elevateNodesOnSelect",v,Y.setState),Z("snapToGrid",D,Y.setState),Z("snapGrid",M,Y.setState),Z("onNodesChange",w,Y.setState),Z("onEdgesChange",C,Y.setState),Z("connectOnClick",k,Y.setState),Z("fitViewOnInit",H,Y.setState),Z("fitViewOnInitOptions",L,Y.setState),Z("onNodesDelete",$,Y.setState),Z("onEdgesDelete",d,Y.setState),Z("onNodeDrag",_,Y.setState),Z("onNodeDragStart",b,Y.setState),Z("onNodeDragStop",A,Y.setState),Z("onSelectionDrag",O,Y.setState),Z("onSelectionDragStart",S,Y.setState),Z("onSelectionDragStop",T,Y.setState),Z("noPanClassName",I,Y.setState),Z("nodeOrigin",P,Y.setState),Z("rfId",V,Y.setState),Z("autoPanOnConnect",B,Y.setState),Z("autoPanOnNodeDrag",K,Y.setState),Z("onError",W,Y.setState),Z("connectionRadius",G,Y.setState),Z("isValidConnection",j,Y.setState),Z("nodeDragThreshold",te,Y.setState),At(e,Q),At(t,Ne),At(y,Ce),At(E,be),At(R,ie),At(g,Te),null},Hs={display:"none"},dd={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Ea="react-flow__node-desc",Sa="react-flow__edge-desc",pd="react-flow__aria-live",hd=e=>e.ariaLiveMessage;function md({rfId:e}){let t=oe(hd);return h.default.createElement("div",{id:`${pd}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:dd},t)}function gd({rfId:e,disableKeyboardA11y:t}){return h.default.createElement(h.default.Fragment,null,h.default.createElement("div",{id:`${Ea}-${e}`,style:Hs},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),h.default.createElement("div",{id:`${Sa}-${e}`,style:Hs},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&h.default.createElement(md,{rfId:e}))}var un=(e=null,t={actInsideInputWithModifier:!0})=>{let[n,r]=(0,h.useState)(!1),o=(0,h.useRef)(!1),s=(0,h.useRef)(new Set([])),[i,a]=(0,h.useMemo)(()=>{if(e!==null){let u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),c=u.reduce((f,p)=>f.concat(...p),[]);return[u,c]}return[[],[]]},[e]);return(0,h.useEffect)(()=>{let l=typeof document<"u"?document:null,u=t?.target||l;if(e!==null){let c=m=>{if(o.current=m.ctrlKey||m.metaKey||m.shiftKey,(!o.current||o.current&&!t.actInsideInputWithModifier)&&Lr(m))return!1;let y=Ls(m.code,a);s.current.add(m[y]),Rs(i,s.current,!1)&&(m.preventDefault(),r(!0))},f=m=>{if((!o.current||o.current&&!t.actInsideInputWithModifier)&&Lr(m))return!1;let y=Ls(m.code,a);Rs(i,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(m[y]),m.key==="Meta"&&s.current.clear(),o.current=!1},p=()=>{s.current.clear(),r(!1)};return u?.addEventListener("keydown",c),u?.addEventListener("keyup",f),window.addEventListener("blur",p),()=>{u?.removeEventListener("keydown",c),u?.removeEventListener("keyup",f),window.removeEventListener("blur",p)}}},[e,r]),n};function Rs(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(o=>t.has(o)))}function Ls(e,t){return t.includes(e)?"code":"key"}function _a(e,t,n,r){let o=e.parentNode||e.parentId;if(!o)return n;let s=t.get(o),i=Dt(s,r);return _a(s,t,{x:(n.x??0)+i.x,y:(n.y??0)+i.y,z:(s[re]?.z??0)>(n.z??0)?s[re]?.z??0:n.z??0},r)}function Na(e,t,n){e.forEach(r=>{let o=r.parentNode||r.parentId;if(o&&!e.has(o))throw new Error(`Parent node ${o} not found`);if(o||n?.[r.id]){let{x:s,y:i,z:a}=_a(r,e,{...r.position,z:r[re]?.z??0},t);r.positionAbsolute={x:s,y:i},r[re].z=a,n?.[r.id]&&(r[re].isParent=!0)}})}function Pr(e,t,n,r){let o=new Map,s={},i=r?1e3:0;return e.forEach(a=>{let l=(_e(a.zIndex)?a.zIndex:0)+(a.selected?i:0),u=t.get(a.id),c={...a,positionAbsolute:{x:a.position.x,y:a.position.y}},f=a.parentNode||a.parentId;f&&(s[f]=!0);let p=u?.type&&u?.type!==a.type;Object.defineProperty(c,re,{enumerable:!1,value:{handleBounds:p?void 0:u?.[re]?.handleBounds,z:l}}),o.set(a.id,c)}),Na(o,n,s),o}function Ca(e,t={}){let{getNodes:n,width:r,height:o,minZoom:s,maxZoom:i,d3Zoom:a,d3Selection:l,fitViewOnInitDone:u,fitViewOnInit:c,nodeOrigin:f}=e(),p=t.initial&&!u&&c;if(a&&l&&(p||!t.initial)){let v=n().filter(E=>{let g=t.includeHiddenNodes?E.width&&E.height:!E.hidden;return t.nodes?.length?g&&t.nodes.some(w=>w.id===E.id):g}),y=v.every(E=>E.width&&E.height);if(v.length>0&&y){let E=Jr(v,f),{x:g,y:w,zoom:C}=fa(E,r,o,t.minZoom??s,t.maxZoom??i,t.padding??.1),x=Se.translate(g,w).scale(C);return typeof t.duration=="number"&&t.duration>0?a.transform(ut(l,t.duration),x):a.transform(l,x),!0}}return!1}function yd(e,t){return e.forEach(n=>{let r=t.get(n.id);r&&t.set(r.id,{...r,[re]:r[re],selected:n.selected})}),new Map(t)}function xd(e,t){return t.map(n=>{let r=e.find(o=>o.id===n.id);return r&&(n.selected=r.selected),n})}function qn({changedNodes:e,changedEdges:t,get:n,set:r}){let{nodeInternals:o,edges:s,onNodesChange:i,onEdgesChange:a,hasDefaultNodes:l,hasDefaultEdges:u}=n();e?.length&&(l&&r({nodeInternals:yd(e,o)}),i?.(e)),t?.length&&(u&&r({edges:xd(t,s)}),a?.(t))}var Tt=()=>{},wd={zoomIn:Tt,zoomOut:Tt,zoomTo:Tt,getZoom:()=>1,setViewport:Tt,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Tt,fitBounds:Tt,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},vd=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),bd=()=>{let e=le(),{d3Zoom:t,d3Selection:n}=oe(vd,ue);return(0,h.useMemo)(()=>n&&t?{zoomIn:o=>t.scaleBy(ut(n,o?.duration),1.2),zoomOut:o=>t.scaleBy(ut(n,o?.duration),1/1.2),zoomTo:(o,s)=>t.scaleTo(ut(n,s?.duration),o),getZoom:()=>e.getState().transform[2],setViewport:(o,s)=>{let[i,a,l]=e.getState().transform,u=Se.translate(o.x??i,o.y??a).scale(o.zoom??l);t.transform(ut(n,s?.duration),u)},getViewport:()=>{let[o,s,i]=e.getState().transform;return{x:o,y:s,zoom:i}},fitView:o=>Ca(e.getState,o),setCenter:(o,s,i)=>{let{width:a,height:l,maxZoom:u}=e.getState(),c=typeof i?.zoom<"u"?i.zoom:u,f=a/2-o*c,p=l/2-s*c,m=Se.translate(f,p).scale(c);t.transform(ut(n,i?.duration),m)},fitBounds:(o,s)=>{let{width:i,height:a,minZoom:l,maxZoom:u}=e.getState(),{x:c,y:f,zoom:p}=fa(o,i,a,l,u,s?.padding??.1),m=Se.translate(c,f).scale(p);t.transform(ut(n,s?.duration),m)},project:o=>{let{transform:s,snapToGrid:i,snapGrid:a}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Fr(o,s,i,a)},screenToFlowPosition:o=>{let{transform:s,snapToGrid:i,snapGrid:a,domNode:l}=e.getState();if(!l)return o;let{x:u,y:c}=l.getBoundingClientRect(),f={x:o.x-u,y:o.y-c};return Fr(f,s,i,a)},flowToScreenPosition:o=>{let{transform:s,domNode:i}=e.getState();if(!i)return o;let{x:a,y:l}=i.getBoundingClientRect(),u=la(o,s);return{x:u.x+a,y:u.y+l}},viewportInitialized:!0}:wd,[t,n])};function Jn(){let e=bd(),t=le(),n=(0,h.useCallback)(()=>t.getState().getNodes().map(y=>({...y})),[]),r=(0,h.useCallback)(y=>t.getState().nodeInternals.get(y),[]),o=(0,h.useCallback)(()=>{let{edges:y=[]}=t.getState();return y.map(E=>({...E}))},[]),s=(0,h.useCallback)(y=>{let{edges:E=[]}=t.getState();return E.find(g=>g.id===y)},[]),i=(0,h.useCallback)(y=>{let{getNodes:E,setNodes:g,hasDefaultNodes:w,onNodesChange:C}=t.getState(),x=E(),N=typeof y=="function"?y(x):y;if(w)g(N);else if(C){let M=N.length===0?x.map(D=>({type:"remove",id:D.id})):N.map(D=>({item:D,type:"reset"}));C(M)}},[]),a=(0,h.useCallback)(y=>{let{edges:E=[],setEdges:g,hasDefaultEdges:w,onEdgesChange:C}=t.getState(),x=typeof y=="function"?y(E):y;if(w)g(x);else if(C){let N=x.length===0?E.map(M=>({type:"remove",id:M.id})):x.map(M=>({item:M,type:"reset"}));C(N)}},[]),l=(0,h.useCallback)(y=>{let E=Array.isArray(y)?y:[y],{getNodes:g,setNodes:w,hasDefaultNodes:C,onNodesChange:x}=t.getState();if(C){let M=[...g(),...E];w(M)}else if(x){let N=E.map(M=>({item:M,type:"add"}));x(N)}},[]),u=(0,h.useCallback)(y=>{let E=Array.isArray(y)?y:[y],{edges:g=[],setEdges:w,hasDefaultEdges:C,onEdgesChange:x}=t.getState();if(C)w([...g,...E]);else if(x){let N=E.map(M=>({item:M,type:"add"}));x(N)}},[]),c=(0,h.useCallback)(()=>{let{getNodes:y,edges:E=[],transform:g}=t.getState(),[w,C,x]=g;return{nodes:y().map(N=>({...N})),edges:E.map(N=>({...N})),viewport:{x:w,y:C,zoom:x}}},[]),f=(0,h.useCallback)(({nodes:y,edges:E})=>{let{nodeInternals:g,getNodes:w,edges:C,hasDefaultNodes:x,hasDefaultEdges:N,onNodesDelete:M,onEdgesDelete:D,onNodesChange:R,onEdgesChange:k}=t.getState(),z=(y||[]).map(_=>_.id),H=(E||[]).map(_=>_.id),L=w().reduce((_,b)=>{let A=b.parentNode||b.parentId,O=!z.includes(b.id)&&A&&_.find(T=>T.id===A);return(typeof b.deletable=="boolean"?b.deletable:!0)&&(z.includes(b.id)||O)&&_.push(b),_},[]),$=C.filter(_=>typeof _.deletable=="boolean"?_.deletable:!0),d=$.filter(_=>H.includes(_.id));if(L||d){let _=ua(L,$),b=[...d,..._],A=b.reduce((O,S)=>(O.includes(S.id)||O.push(S.id),O),[]);if((N||x)&&(N&&t.setState({edges:C.filter(O=>!A.includes(O.id))}),x&&(L.forEach(O=>{g.delete(O.id)}),t.setState({nodeInternals:new Map(g)}))),A.length>0&&(D?.(b),k&&k(A.map(O=>({id:O,type:"remove"})))),L.length>0&&(M?.(L),R)){let O=L.map(S=>({id:S.id,type:"remove"}));R(O)}}},[]),p=(0,h.useCallback)(y=>{let E=Ff(y),g=E?null:t.getState().nodeInternals.get(y.id);return!E&&!g?[null,null,E]:[E?y:ks(g),g,E]},[]),m=(0,h.useCallback)((y,E=!0,g)=>{let[w,C,x]=p(y);return w?(g||t.getState().getNodes()).filter(N=>{if(!x&&(N.id===C.id||!N.positionAbsolute))return!1;let M=ks(N),D=Rr(M,w);return E&&D>0||D>=w.width*w.height}):[]},[]),v=(0,h.useCallback)((y,E,g=!0)=>{let[w]=p(y);if(!w)return!1;let C=Rr(w,E);return g&&C>0||C>=w.width*w.height},[]);return(0,h.useMemo)(()=>({...e,getNodes:n,getNode:r,getEdges:o,getEdge:s,setNodes:i,setEdges:a,addNodes:l,addEdges:u,toObject:c,deleteElements:f,getIntersectingNodes:m,isNodeIntersecting:v}),[e,n,r,o,s,i,a,l,u,c,f,m,v])}var Ed={actInsideInputWithModifier:!1},Sd=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{let n=le(),{deleteElements:r}=Jn(),o=un(e,Ed),s=un(t);(0,h.useEffect)(()=>{if(o){let{edges:i,getNodes:a}=n.getState(),l=a().filter(c=>c.selected),u=i.filter(c=>c.selected);r({nodes:l,edges:u}),n.setState({nodesSelectionActive:!1})}},[o]),(0,h.useEffect)(()=>{n.setState({multiSelectionActive:s})},[s])};function _d(e){let t=le();(0,h.useEffect)(()=>{let n,r=()=>{if(!e.current)return;let o=qr(e.current);(o.height===0||o.width===0)&&t.getState().onError?.("004",De.error004()),t.setState({width:o.width||500,height:o.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}var no={position:"absolute",width:"100%",height:"100%",top:0,left:0},Nd=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Kn=e=>({x:e.x,y:e.y,zoom:e.k}),kt=(e,t)=>e.target.closest(`.${t}`),Bs=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Vs=e=>{let t=e.ctrlKey&&Zn()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},Cd=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),Md=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:o=!0,zoomOnPinch:s=!0,panOnScroll:i=!1,panOnScrollSpeed:a=.5,panOnScrollMode:l=ft.Free,zoomOnDoubleClick:u=!0,elementsSelectable:c,panOnDrag:f=!0,defaultViewport:p,translateExtent:m,minZoom:v,maxZoom:y,zoomActivationKeyCode:E,preventScrolling:g=!0,children:w,noWheelClassName:C,noPanClassName:x})=>{let N=(0,h.useRef)(),M=le(),D=(0,h.useRef)(!1),R=(0,h.useRef)(!1),k=(0,h.useRef)(null),z=(0,h.useRef)({x:0,y:0,zoom:0}),{d3Zoom:H,d3Selection:L,d3ZoomHandler:$,userSelectionActive:d}=oe(Cd,ue),_=un(E),b=(0,h.useRef)(0),A=(0,h.useRef)(!1),O=(0,h.useRef)();return _d(k),(0,h.useEffect)(()=>{if(k.current){let S=k.current.getBoundingClientRect(),T=Or().scaleExtent([v,y]).translateExtent(m),I=fe(k.current).call(T),P=Se.translate(p.x,p.y).scale($t(p.zoom,v,y)),V=[[0,0],[S.width,S.height]],B=T.constrain()(P,V,m);T.transform(I,B),T.wheelDelta(Vs),M.setState({d3Zoom:T,d3Selection:I,d3ZoomHandler:I.on("wheel.zoom"),transform:[B.x,B.y,B.k],domNode:k.current.closest(".react-flow")})}},[]),(0,h.useEffect)(()=>{L&&H&&(i&&!_&&!d?L.on("wheel.zoom",S=>{if(kt(S,C))return!1;S.preventDefault(),S.stopImmediatePropagation();let T=L.property("__zoom").k||1;if(S.ctrlKey&&s){let j=ye(S),te=Vs(S),Q=T*Math.pow(2,te);H.scaleTo(L,Q,j,S);return}let I=S.deltaMode===1?20:1,P=l===ft.Vertical?0:S.deltaX*I,V=l===ft.Horizontal?0:S.deltaY*I;!Zn()&&S.shiftKey&&l!==ft.Vertical&&(P=S.deltaY*I,V=0),H.translateBy(L,-(P/T)*a,-(V/T)*a,{internal:!0});let B=Kn(L.property("__zoom")),{onViewportChangeStart:K,onViewportChange:W,onViewportChangeEnd:G}=M.getState();clearTimeout(O.current),A.current||(A.current=!0,t?.(S,B),K?.(B)),A.current&&(e?.(S,B),W?.(B),O.current=setTimeout(()=>{n?.(S,B),G?.(B),A.current=!1},150))},{passive:!1}):typeof $<"u"&&L.on("wheel.zoom",function(S,T){if(!g&&S.type==="wheel"&&!S.ctrlKey||kt(S,C))return null;S.preventDefault(),$.call(this,S,T)},{passive:!1}))},[d,i,l,L,H,$,_,s,g,C,t,e,n]),(0,h.useEffect)(()=>{H&&H.on("start",S=>{if(!S.sourceEvent||S.sourceEvent.internal)return null;b.current=S.sourceEvent?.button;let{onViewportChangeStart:T}=M.getState(),I=Kn(S.transform);D.current=!0,z.current=I,S.sourceEvent?.type==="mousedown"&&M.setState({paneDragging:!0}),T?.(I),t?.(S.sourceEvent,I)})},[H,t]),(0,h.useEffect)(()=>{H&&(d&&!D.current?H.on("zoom",null):d||H.on("zoom",S=>{let{onViewportChange:T}=M.getState();if(M.setState({transform:[S.transform.x,S.transform.y,S.transform.k]}),R.current=!!(r&&Bs(f,b.current??0)),(e||T)&&!S.sourceEvent?.internal){let I=Kn(S.transform);T?.(I),e?.(S.sourceEvent,I)}}))},[d,H,e,f,r]),(0,h.useEffect)(()=>{H&&H.on("end",S=>{if(!S.sourceEvent||S.sourceEvent.internal)return null;let{onViewportChangeEnd:T}=M.getState();if(D.current=!1,M.setState({paneDragging:!1}),r&&Bs(f,b.current??0)&&!R.current&&r(S.sourceEvent),R.current=!1,(n||T)&&Nd(z.current,S.transform)){let I=Kn(S.transform);z.current=I,clearTimeout(N.current),N.current=setTimeout(()=>{T?.(I),n?.(S.sourceEvent,I)},i?150:0)}})},[H,i,f,n,r]),(0,h.useEffect)(()=>{H&&H.filter(S=>{let T=_||o,I=s&&S.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&S.button===1&&S.type==="mousedown"&&(kt(S,"react-flow__node")||kt(S,"react-flow__edge")))return!0;if(!f&&!T&&!i&&!u&&!s||d||!u&&S.type==="dblclick"||kt(S,C)&&S.type==="wheel"||kt(S,x)&&(S.type!=="wheel"||i&&S.type==="wheel"&&!_)||!s&&S.ctrlKey&&S.type==="wheel"||!T&&!i&&!I&&S.type==="wheel"||!f&&(S.type==="mousedown"||S.type==="touchstart")||Array.isArray(f)&&!f.includes(S.button)&&S.type==="mousedown")return!1;let P=Array.isArray(f)&&f.includes(S.button)||!S.button||S.button<=1;return(!S.ctrlKey||S.type==="wheel")&&P})},[d,H,o,s,i,u,f,c,_]),h.default.createElement("div",{className:"react-flow__renderer",ref:k,style:no},w)},Ad=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Td(){let{userSelectionActive:e,userSelectionRect:t}=oe(Ad,ue);return e&&t?h.default.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Fs(e,t){let n=t.parentNode||t.parentId,r=e.find(o=>o.id===n);if(r){let o=t.position.x+t.width-r.width,s=t.position.y+t.height-r.height;if(o>0||s>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,o>0&&(r.style.width+=o),s>0&&(r.style.height+=s),t.position.x<0){let i=Math.abs(t.position.x);r.position.x=r.position.x-i,r.style.width+=i,t.position.x=0}if(t.position.y<0){let i=Math.abs(t.position.y);r.position.y=r.position.y-i,r.style.height+=i,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function Ma(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);let n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,o)=>{let s=e.filter(a=>a.id===o.id);if(s.length===0)return r.push(o),r;let i={...o};for(let a of s)if(a)switch(a.type){case"select":{i.selected=a.selected;break}case"position":{typeof a.position<"u"&&(i.position=a.position),typeof a.positionAbsolute<"u"&&(i.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(i.dragging=a.dragging),i.expandParent&&Fs(r,i);break}case"dimensions":{typeof a.dimensions<"u"&&(i.width=a.dimensions.width,i.height=a.dimensions.height),typeof a.updateStyle<"u"&&(i.style={...i.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(i.resizing=a.resizing),i.expandParent&&Fs(r,i);break}case"remove":return r}return r.push(i),r},n)}function Aa(e,t){return Ma(e,t)}function kd(e,t){return Ma(e,t)}var qe=(e,t)=>({id:e,type:"select",selected:t});function Ot(e,t){return e.reduce((n,r)=>{let o=t.includes(r.id);return!r.selected&&o?(r.selected=!0,n.push(qe(r.id,!0))):r.selected&&!o&&(r.selected=!1,n.push(qe(r.id,!1))),n},[])}var $r=(e,t)=>n=>{n.target===t.current&&e?.(n)},Id=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Ta=(0,h.memo)(({isSelecting:e,selectionMode:t=cn.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:o,onPaneClick:s,onPaneContextMenu:i,onPaneScroll:a,onPaneMouseEnter:l,onPaneMouseMove:u,onPaneMouseLeave:c,children:f})=>{let p=(0,h.useRef)(null),m=le(),v=(0,h.useRef)(0),y=(0,h.useRef)(0),E=(0,h.useRef)(),{userSelectionActive:g,elementsSelectable:w,dragging:C}=oe(Id,ue),x=()=>{m.setState({userSelectionActive:!1,userSelectionRect:null}),v.current=0,y.current=0},N=$=>{s?.($),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},M=$=>{if(Array.isArray(n)&&n?.includes(2)){$.preventDefault();return}i?.($)},D=a?$=>a($):void 0,R=$=>{let{resetSelectedElements:d,domNode:_}=m.getState();if(E.current=_?.getBoundingClientRect(),!w||!e||$.button!==0||$.target!==p.current||!E.current)return;let{x:b,y:A}=Ze($,E.current);d(),m.setState({userSelectionRect:{width:0,height:0,startX:b,startY:A,x:b,y:A}}),r?.($)},k=$=>{let{userSelectionRect:d,nodeInternals:_,edges:b,transform:A,onNodesChange:O,onEdgesChange:S,nodeOrigin:T,getNodes:I}=m.getState();if(!e||!E.current||!d)return;m.setState({userSelectionActive:!0,nodesSelectionActive:!1});let P=Ze($,E.current),V=d.startX??0,B=d.startY??0,K={...d,x:P.x<V?P.x:V,y:P.y<B?P.y:B,width:Math.abs(P.x-V),height:Math.abs(P.y-B)},W=I(),G=ca(_,K,A,t===cn.Partial,!0,T),j=ua(G,b).map(Q=>Q.id),te=G.map(Q=>Q.id);if(v.current!==te.length){v.current=te.length;let Q=Ot(W,te);Q.length&&O?.(Q)}if(y.current!==j.length){y.current=j.length;let Q=Ot(b,j);Q.length&&S?.(Q)}m.setState({userSelectionRect:K})},z=$=>{if($.button!==0)return;let{userSelectionRect:d}=m.getState();!g&&d&&$.target===p.current&&N?.($),m.setState({nodesSelectionActive:v.current>0}),x(),o?.($)},H=$=>{g&&(m.setState({nodesSelectionActive:v.current>0}),o?.($)),x()},L=w&&(e||g);return h.default.createElement("div",{className:ge(["react-flow__pane",{dragging:C,selection:e}]),onClick:L?void 0:$r(N,p),onContextMenu:$r(M,p),onWheel:$r(D,p),onMouseEnter:L?void 0:l,onMouseDown:L?R:void 0,onMouseMove:L?k:u,onMouseUp:L?z:void 0,onMouseLeave:L?H:c,ref:p,style:no},f,h.default.createElement(Td,null))});Ta.displayName="Pane";function ka(e,t){let n=e.parentNode||e.parentId;if(!n)return!1;let r=t.get(n);return r?r.selected?!0:ka(r,t):!1}function Ys(e,t,n){let r=e;do{if(r?.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function Od(e,t,n,r){return Array.from(e.values()).filter(o=>(o.selected||o.id===r)&&(!o.parentNode||o.parentId||!ka(o,e))&&(o.draggable||t&&typeof o.draggable>"u")).map(o=>({id:o.id,position:o.position||{x:0,y:0},positionAbsolute:o.positionAbsolute||{x:0,y:0},distance:{x:n.x-(o.positionAbsolute?.x??0),y:n.y-(o.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:o.extent,parentNode:o.parentNode||o.parentId,parentId:o.parentNode||o.parentId,width:o.width,height:o.height,expandParent:o.expandParent}))}function Dd(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function Ia(e,t,n,r,o=[0,0],s){let i=Dd(e,e.extent||r),a=i,l=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(l&&e.width&&e.height){let f=n.get(l),{x:p,y:m}=Dt(f,o).positionAbsolute;a=f&&_e(p)&&_e(m)&&_e(f.width)&&_e(f.height)?[[p+e.width*o[0],m+e.height*o[1]],[p+f.width-e.width+e.width*o[0],m+f.height-e.height+e.height*o[1]]]:a}else s?.("005",De.error005()),a=i;else if(e.extent&&l&&e.extent!=="parent"){let f=n.get(l),{x:p,y:m}=Dt(f,o).positionAbsolute;a=[[e.extent[0][0]+p,e.extent[0][1]+m],[e.extent[1][0]+p,e.extent[1][1]+m]]}let u={x:0,y:0};if(l){let f=n.get(l);u=Dt(f,o).positionAbsolute}let c=a&&a!=="parent"?Kr(t,a):t;return{position:{x:c.x-u.x,y:c.y-u.y},positionAbsolute:c}}function zr({nodeId:e,dragItems:t,nodeInternals:n}){let r=t.map(o=>({...n.get(o.id),position:o.position,positionAbsolute:o.positionAbsolute}));return[e?r.find(o=>o.id===e):r[0],r]}var Xs=(e,t,n,r)=>{let o=t.querySelectorAll(e);if(!o||!o.length)return null;let s=Array.from(o),i=t.getBoundingClientRect(),a={x:i.width*r[0],y:i.height*r[1]};return s.map(l=>{let u=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(u.left-i.left-a.x)/n,y:(u.top-i.top-a.y)/n,...qr(l)}})};function an(e,t,n){return n===void 0?n:r=>{let o=t().nodeInternals.get(e);o&&n(r,{...o})}}function Xr({id:e,store:t,unselect:n=!1,nodeRef:r}){let{addSelectedNodes:o,unselectNodesAndEdges:s,multiSelectionActive:i,nodeInternals:a,onError:l}=t.getState(),u=a.get(e);if(!u){l?.("012",De.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&i)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):o([e])}function Pd(){let e=le();return(0,h.useCallback)(({sourceEvent:n})=>{let{transform:r,snapGrid:o,snapToGrid:s}=e.getState(),i=n.touches?n.touches[0].clientX:n.clientX,a=n.touches?n.touches[0].clientY:n.clientY,l={x:(i-r[0])/r[2],y:(a-r[1])/r[2]};return{xSnapped:s?o[0]*Math.round(l.x/o[0]):l.x,ySnapped:s?o[1]*Math.round(l.y/o[1]):l.y,...l}},[])}function Hr(e){return(t,n,r)=>e?.(t,r)}function Oa({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:s,selectNodesOnDrag:i}){let a=le(),[l,u]=(0,h.useState)(!1),c=(0,h.useRef)([]),f=(0,h.useRef)({x:null,y:null}),p=(0,h.useRef)(0),m=(0,h.useRef)(null),v=(0,h.useRef)({x:0,y:0}),y=(0,h.useRef)(null),E=(0,h.useRef)(!1),g=(0,h.useRef)(!1),w=(0,h.useRef)(!1),C=Pd();return(0,h.useEffect)(()=>{if(e?.current){let x=fe(e.current),N=({x:R,y:k})=>{let{nodeInternals:z,onNodeDrag:H,onSelectionDrag:L,updateNodePositions:$,nodeExtent:d,snapGrid:_,snapToGrid:b,nodeOrigin:A,onError:O}=a.getState();f.current={x:R,y:k};let S=!1,T={x:0,y:0,x2:0,y2:0};if(c.current.length>1&&d){let P=Jr(c.current,A);T=Zr(P)}if(c.current=c.current.map(P=>{let V={x:R-P.distance.x,y:k-P.distance.y};b&&(V.x=_[0]*Math.round(V.x/_[0]),V.y=_[1]*Math.round(V.y/_[1]));let B=[[d[0][0],d[0][1]],[d[1][0],d[1][1]]];c.current.length>1&&d&&!P.extent&&(B[0][0]=P.positionAbsolute.x-T.x+d[0][0],B[1][0]=P.positionAbsolute.x+(P.width??0)-T.x2+d[1][0],B[0][1]=P.positionAbsolute.y-T.y+d[0][1],B[1][1]=P.positionAbsolute.y+(P.height??0)-T.y2+d[1][1]);let K=Ia(P,V,z,B,A,O);return S=S||P.position.x!==K.position.x||P.position.y!==K.position.y,P.position=K.position,P.positionAbsolute=K.positionAbsolute,P}),!S)return;$(c.current,!0,!0),u(!0);let I=o?H:Hr(L);if(I&&y.current){let[P,V]=zr({nodeId:o,dragItems:c.current,nodeInternals:z});I(y.current,P,V)}},M=()=>{if(!m.current)return;let[R,k]=Js(v.current,m.current);if(R!==0||k!==0){let{transform:z,panBy:H}=a.getState();f.current.x=(f.current.x??0)-R/z[2],f.current.y=(f.current.y??0)-k/z[2],H({x:R,y:k})&&N(f.current)}p.current=requestAnimationFrame(M)},D=R=>{let{nodeInternals:k,multiSelectionActive:z,nodesDraggable:H,unselectNodesAndEdges:L,onNodeDragStart:$,onSelectionDragStart:d}=a.getState();g.current=!0;let _=o?$:Hr(d);(!i||!s)&&!z&&o&&(k.get(o)?.selected||L()),o&&s&&i&&Xr({id:o,store:a,nodeRef:e});let b=C(R);if(f.current=b,c.current=Od(k,H,b,o),_&&c.current){let[A,O]=zr({nodeId:o,dragItems:c.current,nodeInternals:k});_(R.sourceEvent,A,O)}};if(t)x.on(".drag",null);else{let R=yr().on("start",k=>{let{domNode:z,nodeDragThreshold:H}=a.getState();H===0&&D(k),w.current=!1;let L=C(k);f.current=L,m.current=z?.getBoundingClientRect()||null,v.current=Ze(k.sourceEvent,m.current)}).on("drag",k=>{let z=C(k),{autoPanOnNodeDrag:H,nodeDragThreshold:L}=a.getState();if(k.sourceEvent.type==="touchmove"&&k.sourceEvent.touches.length>1&&(w.current=!0),!w.current){if(!E.current&&g.current&&H&&(E.current=!0,M()),!g.current){let $=z.xSnapped-(f?.current?.x??0),d=z.ySnapped-(f?.current?.y??0);Math.sqrt($*$+d*d)>L&&D(k)}(f.current.x!==z.xSnapped||f.current.y!==z.ySnapped)&&c.current&&g.current&&(y.current=k.sourceEvent,v.current=Ze(k.sourceEvent,m.current),N(z))}}).on("end",k=>{if(!(!g.current||w.current)&&(u(!1),E.current=!1,g.current=!1,cancelAnimationFrame(p.current),c.current)){let{updateNodePositions:z,nodeInternals:H,onNodeDragStop:L,onSelectionDragStop:$}=a.getState(),d=o?L:Hr($);if(z(c.current,!1,!1),d){let[_,b]=zr({nodeId:o,dragItems:c.current,nodeInternals:H});d(k.sourceEvent,_,b)}}}).filter(k=>{let z=k.target;return!k.button&&(!n||!Ys(z,`.${n}`,e))&&(!r||Ys(z,r,e))});return x.call(R),()=>{x.on(".drag",null)}}}},[e,t,n,r,s,a,o,i,C]),l}function Da(){let e=le();return(0,h.useCallback)(n=>{let{nodeInternals:r,nodeExtent:o,updateNodePositions:s,getNodes:i,snapToGrid:a,snapGrid:l,onError:u,nodesDraggable:c}=e.getState(),f=i().filter(w=>w.selected&&(w.draggable||c&&typeof w.draggable>"u")),p=a?l[0]:5,m=a?l[1]:5,v=n.isShiftPressed?4:1,y=n.x*p*v,E=n.y*m*v,g=f.map(w=>{if(w.positionAbsolute){let C={x:w.positionAbsolute.x+y,y:w.positionAbsolute.y+E};a&&(C.x=l[0]*Math.round(C.x/l[0]),C.y=l[1]*Math.round(C.y/l[1]));let{positionAbsolute:x,position:N}=Ia(w,C,r,o,void 0,u);w.position=N,w.positionAbsolute=x}return w});s(g,!0,!1)},[])}var Pt={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},ln=e=>{let t=({id:n,type:r,data:o,xPos:s,yPos:i,xPosOrigin:a,yPosOrigin:l,selected:u,onClick:c,onMouseEnter:f,onMouseMove:p,onMouseLeave:m,onContextMenu:v,onDoubleClick:y,style:E,className:g,isDraggable:w,isSelectable:C,isConnectable:x,isFocusable:N,selectNodesOnDrag:M,sourcePosition:D,targetPosition:R,hidden:k,resizeObserver:z,dragHandle:H,zIndex:L,isParent:$,noDragClassName:d,noPanClassName:_,initialized:b,disableKeyboardA11y:A,ariaLabel:O,rfId:S,hasHandleBounds:T})=>{let I=le(),P=(0,h.useRef)(null),V=(0,h.useRef)(null),B=(0,h.useRef)(D),K=(0,h.useRef)(R),W=(0,h.useRef)(r),G=C||w||c||f||p||m,j=Da(),te=an(n,I.getState,f),Q=an(n,I.getState,p),Ne=an(n,I.getState,m),ve=an(n,I.getState,v),Ce=an(n,I.getState,y),be=J=>{let{nodeDragThreshold:Y}=I.getState();if(C&&(!M||!w||Y>0)&&Xr({id:n,store:I,nodeRef:P}),c){let we=I.getState().nodeInternals.get(n);we&&c(J,{...we})}},ie=J=>{if(!Lr(J)&&!A)if(ta.includes(J.key)&&C){let Y=J.key==="Escape";Xr({id:n,store:I,unselect:Y,nodeRef:P})}else w&&u&&Object.prototype.hasOwnProperty.call(Pt,J.key)&&(I.setState({ariaLiveMessage:`Moved selected node ${J.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~i}`}),j({x:Pt[J.key].x,y:Pt[J.key].y,isShiftPressed:J.shiftKey}))};(0,h.useEffect)(()=>()=>{V.current&&(z?.unobserve(V.current),V.current=null)},[]),(0,h.useEffect)(()=>{if(P.current&&!k){let J=P.current;(!b||!T||V.current!==J)&&(V.current&&z?.unobserve(V.current),z?.observe(J),V.current=J)}},[k,b,T]),(0,h.useEffect)(()=>{let J=W.current!==r,Y=B.current!==D,we=K.current!==R;P.current&&(J||Y||we)&&(J&&(W.current=r),Y&&(B.current=D),we&&(K.current=R),I.getState().updateNodeDimensions([{id:n,nodeElement:P.current,forceUpdate:!0}]))},[n,r,D,R]);let Te=Oa({nodeRef:P,disabled:k||!w,noDragClassName:d,handleSelector:H,nodeId:n,isSelectable:C,selectNodesOnDrag:M});return k?null:h.default.createElement("div",{className:ge(["react-flow__node",`react-flow__node-${r}`,{[_]:w},g,{selected:u,selectable:C,parent:$,dragging:Te}]),ref:P,style:{zIndex:L,transform:`translate(${a}px,${l}px)`,pointerEvents:G?"all":"none",visibility:b?"visible":"hidden",...E},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:te,onMouseMove:Q,onMouseLeave:Ne,onContextMenu:ve,onClick:be,onDoubleClick:Ce,onKeyDown:N?ie:void 0,tabIndex:N?0:void 0,role:N?"button":void 0,"aria-describedby":A?void 0:`${Ea}-${S}`,"aria-label":O},h.default.createElement(Zf,{value:n},h.default.createElement(e,{id:n,data:o,type:r,xPos:s,yPos:i,selected:u,isConnectable:x,sourcePosition:D,targetPosition:R,dragging:Te,dragHandle:H,zIndex:L})))};return t.displayName="NodeWrapper",(0,h.memo)(t)},$d=e=>{let t=e.getNodes().filter(n=>n.selected);return{...Jr(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function zd({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){let r=le(),{width:o,height:s,x:i,y:a,transformString:l,userSelectionActive:u}=oe($d,ue),c=Da(),f=(0,h.useRef)(null);if((0,h.useEffect)(()=>{n||f.current?.focus({preventScroll:!0})},[n]),Oa({nodeRef:f}),u||!o||!s)return null;let p=e?v=>{let y=r.getState().getNodes().filter(E=>E.selected);e(v,y)}:void 0,m=v=>{Object.prototype.hasOwnProperty.call(Pt,v.key)&&c({x:Pt[v.key].x,y:Pt[v.key].y,isShiftPressed:v.shiftKey})};return h.default.createElement("div",{className:ge(["react-flow__nodesselection","react-flow__container",t]),style:{transform:l}},h.default.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:n?void 0:-1,onKeyDown:n?void 0:m,style:{width:o,height:s,top:a,left:i}}))}var Hd=(0,h.memo)(zd),Rd=e=>e.nodesSelectionActive,Pa=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:s,onPaneScroll:i,deleteKeyCode:a,onMove:l,onMoveStart:u,onMoveEnd:c,selectionKeyCode:f,selectionOnDrag:p,selectionMode:m,onSelectionStart:v,onSelectionEnd:y,multiSelectionKeyCode:E,panActivationKeyCode:g,zoomActivationKeyCode:w,elementsSelectable:C,zoomOnScroll:x,zoomOnPinch:N,panOnScroll:M,panOnScrollSpeed:D,panOnScrollMode:R,zoomOnDoubleClick:k,panOnDrag:z,defaultViewport:H,translateExtent:L,minZoom:$,maxZoom:d,preventScrolling:_,onSelectionContextMenu:b,noWheelClassName:A,noPanClassName:O,disableKeyboardA11y:S})=>{let T=oe(Rd),I=un(f),P=un(g),V=P||z,B=P||M,K=I||p&&V!==!0;return Sd({deleteKeyCode:a,multiSelectionKeyCode:E}),h.default.createElement(Md,{onMove:l,onMoveStart:u,onMoveEnd:c,onPaneContextMenu:s,elementsSelectable:C,zoomOnScroll:x,zoomOnPinch:N,panOnScroll:B,panOnScrollSpeed:D,panOnScrollMode:R,zoomOnDoubleClick:k,panOnDrag:!I&&V,defaultViewport:H,translateExtent:L,minZoom:$,maxZoom:d,zoomActivationKeyCode:w,preventScrolling:_,noWheelClassName:A,noPanClassName:O},h.default.createElement(Ta,{onSelectionStart:v,onSelectionEnd:y,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:s,onPaneScroll:i,panOnDrag:V,isSelecting:!!K,selectionMode:m},e,T&&h.default.createElement(Hd,{onSelectionContextMenu:b,noPanClassName:O,disableKeyboardA11y:S})))};Pa.displayName="FlowRenderer";var Ld=(0,h.memo)(Pa);function Bd(e){return oe((0,h.useCallback)(n=>e?ca(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function Vd(e){let t={input:ln(e.input||xa),default:ln(e.default||Yr),output:ln(e.output||va),group:ln(e.group||to)},n={},r=Object.keys(e).filter(o=>!["input","default","output","group"].includes(o)).reduce((o,s)=>(o[s]=ln(e[s]||Yr),o),n);return{...t,...r}}var Fd=({x:e,y:t,width:n,height:r,origin:o})=>!n||!r?{x:e,y:t}:o[0]<0||o[1]<0||o[0]>1||o[1]>1?{x:e,y:t}:{x:e-n*o[0],y:t-r*o[1]},Yd=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),$a=e=>{let{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,updateNodeDimensions:s,onError:i}=oe(Yd,ue),a=Bd(e.onlyRenderVisibleElements),l=(0,h.useRef)(),u=(0,h.useMemo)(()=>{if(typeof ResizeObserver>"u")return null;let c=new ResizeObserver(f=>{let p=f.map(m=>({id:m.target.getAttribute("data-id"),nodeElement:m.target,forceUpdate:!0}));s(p)});return l.current=c,c},[]);return(0,h.useEffect)(()=>()=>{l?.current?.disconnect()},[]),h.default.createElement("div",{className:"react-flow__nodes",style:no},a.map(c=>{let f=c.type||"default";e.nodeTypes[f]||(i?.("003",De.error003(f)),f="default");let p=e.nodeTypes[f]||e.nodeTypes.default,m=!!(c.draggable||t&&typeof c.draggable>"u"),v=!!(c.selectable||o&&typeof c.selectable>"u"),y=!!(c.connectable||n&&typeof c.connectable>"u"),E=!!(c.focusable||r&&typeof c.focusable>"u"),g=e.nodeExtent?Kr(c.positionAbsolute,e.nodeExtent):c.positionAbsolute,w=g?.x??0,C=g?.y??0,x=Fd({x:w,y:C,width:c.width??0,height:c.height??0,origin:e.nodeOrigin});return h.default.createElement(p,{key:c.id,id:c.id,className:c.className,style:c.style,type:f,data:c.data,sourcePosition:c.sourcePosition||F.Bottom,targetPosition:c.targetPosition||F.Top,hidden:c.hidden,xPos:w,yPos:C,xPosOrigin:x.x,yPosOrigin:x.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!c.selected,isDraggable:m,isSelectable:v,isConnectable:y,isFocusable:E,resizeObserver:u,dragHandle:c.dragHandle,zIndex:c[re]?.z??0,isParent:!!c[re]?.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!c.width&&!!c.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:c.ariaLabel,hasHandleBounds:!!c[re]?.handleBounds})}))};$a.displayName="NodeRenderer";var Xd=(0,h.memo)($a),Ud=(e,t,n)=>n===F.Left?e-t:n===F.Right?e+t:e,qd=(e,t,n)=>n===F.Top?e-t:n===F.Bottom?e+t:e,Us="react-flow__edgeupdater",qs=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:s,onMouseOut:i,type:a})=>h.default.createElement("circle",{onMouseDown:o,onMouseEnter:s,onMouseOut:i,className:ge([Us,`${Us}-${a}`]),cx:Ud(t,r,e),cy:qd(n,r,e),r,stroke:"transparent",fill:"transparent"}),Kd=()=>!0,It=e=>{let t=({id:n,className:r,type:o,data:s,onClick:i,onEdgeDoubleClick:a,selected:l,animated:u,label:c,labelStyle:f,labelShowBg:p,labelBgStyle:m,labelBgPadding:v,labelBgBorderRadius:y,style:E,source:g,target:w,sourceX:C,sourceY:x,targetX:N,targetY:M,sourcePosition:D,targetPosition:R,elementsSelectable:k,hidden:z,sourceHandleId:H,targetHandleId:L,onContextMenu:$,onMouseEnter:d,onMouseMove:_,onMouseLeave:b,reconnectRadius:A,onReconnect:O,onReconnectStart:S,onReconnectEnd:T,markerEnd:I,markerStart:P,rfId:V,ariaLabel:B,isFocusable:K,isReconnectable:W,pathOptions:G,interactionWidth:j,disableKeyboardA11y:te})=>{let Q=(0,h.useRef)(null),[Ne,ve]=(0,h.useState)(!1),[Ce,be]=(0,h.useState)(!1),ie=le(),Te=(0,h.useMemo)(()=>`url('#${Vr(P,V)}')`,[P,V]),J=(0,h.useMemo)(()=>`url('#${Vr(I,V)}')`,[I,V]);if(z)return null;let Y=ce=>{let{edges:ke,addSelectedEdges:Qe,unselectNodesAndEdges:Je,multiSelectionActive:wt}=ie.getState(),Ie=ke.find(et=>et.id===n);Ie&&(k&&(ie.setState({nodesSelectionActive:!1}),Ie.selected&&wt?(Je({nodes:[],edges:[Ie]}),Q.current?.blur()):Qe([n])),i&&i(ce,Ie))},we=sn(n,ie.getState,a),We=sn(n,ie.getState,$),zt=sn(n,ie.getState,d),ht=sn(n,ie.getState,_),mt=sn(n,ie.getState,b),Pe=(ce,ke)=>{if(ce.button!==0)return;let{edges:Qe,isValidConnection:Je}=ie.getState(),wt=ke?w:g,Ie=(ke?L:H)||null,et=ke?"target":"source",er=Je||Kd,tr=ke,Rt=Qe.find(tt=>tt.id===n);be(!0),S?.(ce,Rt,et);let nr=tt=>{be(!1),T?.(tt,Rt,et)};ha({event:ce,handleId:Ie,nodeId:wt,onConnect:tt=>O?.(Rt,tt),isTarget:tr,getState:ie.getState,setState:ie.setState,isValidConnection:er,edgeUpdaterType:et,onReconnectEnd:nr})},gt=ce=>Pe(ce,!0),Ge=ce=>Pe(ce,!1),je=()=>ve(!0),yt=()=>ve(!1),xt=!k&&!i,Ht=ce=>{if(!te&&ta.includes(ce.key)&&k){let{unselectNodesAndEdges:ke,addSelectedEdges:Qe,edges:Je}=ie.getState();ce.key==="Escape"?(Q.current?.blur(),ke({edges:[Je.find(Ie=>Ie.id===n)]})):Qe([n])}};return h.default.createElement("g",{className:ge(["react-flow__edge",`react-flow__edge-${o}`,r,{selected:l,animated:u,inactive:xt,updating:Ne}]),onClick:Y,onDoubleClick:we,onContextMenu:We,onMouseEnter:zt,onMouseMove:ht,onMouseLeave:mt,onKeyDown:K?Ht:void 0,tabIndex:K?0:void 0,role:K?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":B===null?void 0:B||`Edge from ${g} to ${w}`,"aria-describedby":K?`${Sa}-${V}`:void 0,ref:Q},!Ce&&h.default.createElement(e,{id:n,source:g,target:w,selected:l,animated:u,label:c,labelStyle:f,labelShowBg:p,labelBgStyle:m,labelBgPadding:v,labelBgBorderRadius:y,data:s,style:E,sourceX:C,sourceY:x,targetX:N,targetY:M,sourcePosition:D,targetPosition:R,sourceHandleId:H,targetHandleId:L,markerStart:Te,markerEnd:J,pathOptions:G,interactionWidth:j}),W&&h.default.createElement(h.default.Fragment,null,(W==="source"||W===!0)&&h.default.createElement(qs,{position:D,centerX:C,centerY:x,radius:A,onMouseDown:gt,onMouseEnter:je,onMouseOut:yt,type:"source"}),(W==="target"||W===!0)&&h.default.createElement(qs,{position:R,centerX:N,centerY:M,radius:A,onMouseDown:Ge,onMouseEnter:je,onMouseOut:yt,type:"target"})))};return t.displayName="EdgeWrapper",(0,h.memo)(t)};function Zd(e){let t={default:It(e.default||Gn),straight:It(e.bezier||jr),step:It(e.step||Gr),smoothstep:It(e.step||Qn),simplebezier:It(e.simplebezier||Wr)},n={},r=Object.keys(e).filter(o=>!["default","bezier"].includes(o)).reduce((o,s)=>(o[s]=It(e[s]||Gn),o),n);return{...t,...r}}function Ks(e,t,n=null){let r=(n?.x||0)+t.x,o=(n?.y||0)+t.y,s=n?.width||t.width,i=n?.height||t.height;switch(e){case F.Top:return{x:r+s/2,y:o};case F.Right:return{x:r+s,y:o+i/2};case F.Bottom:return{x:r+s/2,y:o+i};case F.Left:return{x:r,y:o+i/2}}}function Zs(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}var Wd=(e,t,n,r,o,s)=>{let i=Ks(n,e,t),a=Ks(s,r,o);return{sourceX:i.x,sourceY:i.y,targetX:a.x,targetY:a.y}};function Gd({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:o,targetHeight:s,width:i,height:a,transform:l}){let u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+o),y2:Math.max(e.y+r,t.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);let c=Zr({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:i/l[2],height:a/l[2]}),f=Math.max(0,Math.min(c.x2,u.x2)-Math.max(c.x,u.x)),p=Math.max(0,Math.min(c.y2,u.y2)-Math.max(c.y,u.y));return Math.ceil(f*p)>0}function Ws(e){let t=e?.[re]?.handleBounds||null,n=t&&e?.width&&e?.height&&typeof e?.positionAbsolute?.x<"u"&&typeof e?.positionAbsolute?.y<"u";return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},t,!!n]}var jd=[{level:0,isMaxLevel:!0,edges:[]}];function Qd(e,t,n=!1){let r=-1,o=e.reduce((i,a)=>{let l=_e(a.zIndex),u=l?a.zIndex:0;if(n){let c=t.get(a.target),f=t.get(a.source),p=a.selected||c?.selected||f?.selected,m=Math.max(f?.[re]?.z||0,c?.[re]?.z||0,1e3);u=(l?a.zIndex:0)+(p?m:0)}return i[u]?i[u].push(a):i[u]=[a],r=u>r?u:r,i},{}),s=Object.entries(o).map(([i,a])=>{let l=+i;return{edges:a,level:l,isMaxLevel:l===r}});return s.length===0?jd:s}function Jd(e,t,n){let r=oe((0,h.useCallback)(o=>e?o.edges.filter(s=>{let i=t.get(s.source),a=t.get(s.target);return i?.width&&i?.height&&a?.width&&a?.height&&Gd({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:a.width,targetHeight:a.height,width:o.width,height:o.height,transform:o.transform})}):o.edges,[e,t]));return Qd(r,t,n)}var ep=({color:e="none",strokeWidth:t=1})=>h.default.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),tp=({color:e="none",strokeWidth:t=1})=>h.default.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Gs={[Wn.Arrow]:ep,[Wn.ArrowClosed]:tp};function np(e){let t=le();return(0,h.useMemo)(()=>Object.prototype.hasOwnProperty.call(Gs,e)?Gs[e]:(t.getState().onError?.("009",De.error009(e)),null),[e])}var rp=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:s="strokeWidth",strokeWidth:i,orient:a="auto-start-reverse"})=>{let l=np(t);return l?h.default.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:a,refX:"0",refY:"0"},h.default.createElement(l,{color:n,strokeWidth:i})):null},op=({defaultColor:e,rfId:t})=>n=>{let r=[];return n.edges.reduce((o,s)=>([s.markerStart,s.markerEnd].forEach(i=>{if(i&&typeof i=="object"){let a=Vr(i,t);r.includes(a)||(o.push({id:a,color:i.color||e,...i}),r.push(a))}}),o),[]).sort((o,s)=>o.id.localeCompare(s.id))},za=({defaultColor:e,rfId:t})=>{let n=oe((0,h.useCallback)(op({defaultColor:e,rfId:t}),[e,t]),(r,o)=>!(r.length!==o.length||r.some((s,i)=>s.id!==o[i].id)));return h.default.createElement("defs",null,n.map(r=>h.default.createElement(rp,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};za.displayName="MarkerDefinitions";var ip=(0,h.memo)(za),sp=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),Ha=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:o,noPanClassName:s,onEdgeContextMenu:i,onEdgeMouseEnter:a,onEdgeMouseMove:l,onEdgeMouseLeave:u,onEdgeClick:c,onEdgeDoubleClick:f,onReconnect:p,onReconnectStart:m,onReconnectEnd:v,reconnectRadius:y,children:E,disableKeyboardA11y:g})=>{let{edgesFocusable:w,edgesUpdatable:C,elementsSelectable:x,width:N,height:M,connectionMode:D,nodeInternals:R,onError:k}=oe(sp,ue),z=Jd(t,R,n);return N?h.default.createElement(h.default.Fragment,null,z.map(({level:H,edges:L,isMaxLevel:$})=>h.default.createElement("svg",{key:H,style:{zIndex:H},width:N,height:M,className:"react-flow__edges react-flow__container"},$&&h.default.createElement(ip,{defaultColor:e,rfId:r}),h.default.createElement("g",null,L.map(d=>{let[_,b,A]=Ws(R.get(d.source)),[O,S,T]=Ws(R.get(d.target));if(!A||!T)return null;let I=d.type||"default";o[I]||(k?.("011",De.error011(I)),I="default");let P=o[I]||o.default,V=D===dt.Strict?S.target:(S.target??[]).concat(S.source??[]),B=Zs(b.source,d.sourceHandle),K=Zs(V,d.targetHandle),W=B?.position||F.Bottom,G=K?.position||F.Top,j=!!(d.focusable||w&&typeof d.focusable>"u"),te=d.reconnectable||d.updatable,Q=typeof p<"u"&&(te||C&&typeof te>"u");if(!B||!K)return k?.("008",De.error008(B,d)),null;let{sourceX:Ne,sourceY:ve,targetX:Ce,targetY:be}=Wd(_,B,W,O,K,G);return h.default.createElement(P,{key:d.id,id:d.id,className:ge([d.className,s]),type:I,data:d.data,selected:!!d.selected,animated:!!d.animated,hidden:!!d.hidden,label:d.label,labelStyle:d.labelStyle,labelShowBg:d.labelShowBg,labelBgStyle:d.labelBgStyle,labelBgPadding:d.labelBgPadding,labelBgBorderRadius:d.labelBgBorderRadius,style:d.style,source:d.source,target:d.target,sourceHandleId:d.sourceHandle,targetHandleId:d.targetHandle,markerEnd:d.markerEnd,markerStart:d.markerStart,sourceX:Ne,sourceY:ve,targetX:Ce,targetY:be,sourcePosition:W,targetPosition:G,elementsSelectable:x,onContextMenu:i,onMouseEnter:a,onMouseMove:l,onMouseLeave:u,onClick:c,onEdgeDoubleClick:f,onReconnect:p,onReconnectStart:m,onReconnectEnd:v,reconnectRadius:y,rfId:r,ariaLabel:d.ariaLabel,isFocusable:j,isReconnectable:Q,pathOptions:"pathOptions"in d?d.pathOptions:void 0,interactionWidth:d.interactionWidth,disableKeyboardA11y:g})})))),E):null};Ha.displayName="EdgeRenderer";var ap=(0,h.memo)(Ha),lp=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function cp({children:e}){let t=oe(lp);return h.default.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function up(e){let t=Jn(),n=(0,h.useRef)(!1);(0,h.useEffect)(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}var fp={[F.Left]:F.Right,[F.Right]:F.Left,[F.Top]:F.Bottom,[F.Bottom]:F.Top},Ra=({nodeId:e,handleType:t,style:n,type:r=Ke.Bezier,CustomComponent:o,connectionStatus:s})=>{let{fromNode:i,handleId:a,toX:l,toY:u,connectionMode:c}=oe((0,h.useCallback)(M=>({fromNode:M.nodeInternals.get(e),handleId:M.connectionHandleId,toX:(M.connectionPosition.x-M.transform[0])/M.transform[2],toY:(M.connectionPosition.y-M.transform[1])/M.transform[2],connectionMode:M.connectionMode}),[e]),ue),f=i?.[re]?.handleBounds,p=f?.[t];if(c===dt.Loose&&(p=p||f?.[t==="source"?"target":"source"]),!i||!p)return null;let m=a?p.find(M=>M.id===a):p[0],v=m?m.x+m.width/2:(i.width??0)/2,y=m?m.y+m.height/2:i.height??0,E=(i.positionAbsolute?.x??0)+v,g=(i.positionAbsolute?.y??0)+y,w=m?.position,C=w?fp[w]:null;if(!w||!C)return null;if(o)return h.default.createElement(o,{connectionLineType:r,connectionLineStyle:n,fromNode:i,fromHandle:m,fromX:E,fromY:g,toX:l,toY:u,fromPosition:w,toPosition:C,connectionStatus:s});let x="",N={sourceX:E,sourceY:g,sourcePosition:w,targetX:l,targetY:u,targetPosition:C};return r===Ke.Bezier?[x]=aa(N):r===Ke.Step?[x]=Br({...N,borderRadius:0}):r===Ke.SmoothStep?[x]=Br(N):r===Ke.SimpleBezier?[x]=sa(N):x=`M${E},${g} ${l},${u}`,h.default.createElement("path",{d:x,fill:"none",className:"react-flow__connection-path",style:n})};Ra.displayName="ConnectionLine";var dp=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function pp({containerStyle:e,style:t,type:n,component:r}){let{nodeId:o,handleType:s,nodesConnectable:i,width:a,height:l,connectionStatus:u}=oe(dp,ue);return!(o&&s&&a&&i)?null:h.default.createElement("svg",{style:e,width:a,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},h.default.createElement("g",{className:ge(["react-flow__connection",u])},h.default.createElement(Ra,{nodeId:o,handleType:s,style:t,type:n,CustomComponent:r,connectionStatus:u})))}function js(e,t){let n=(0,h.useRef)(null),r=le();return(0,h.useMemo)(()=>t(e),[e])}var La=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:o,onInit:s,onNodeClick:i,onEdgeClick:a,onNodeDoubleClick:l,onEdgeDoubleClick:u,onNodeMouseEnter:c,onNodeMouseMove:f,onNodeMouseLeave:p,onNodeContextMenu:m,onSelectionContextMenu:v,onSelectionStart:y,onSelectionEnd:E,connectionLineType:g,connectionLineStyle:w,connectionLineComponent:C,connectionLineContainerStyle:x,selectionKeyCode:N,selectionOnDrag:M,selectionMode:D,multiSelectionKeyCode:R,panActivationKeyCode:k,zoomActivationKeyCode:z,deleteKeyCode:H,onlyRenderVisibleElements:L,elementsSelectable:$,selectNodesOnDrag:d,defaultViewport:_,translateExtent:b,minZoom:A,maxZoom:O,preventScrolling:S,defaultMarkerColor:T,zoomOnScroll:I,zoomOnPinch:P,panOnScroll:V,panOnScrollSpeed:B,panOnScrollMode:K,zoomOnDoubleClick:W,panOnDrag:G,onPaneClick:j,onPaneMouseEnter:te,onPaneMouseMove:Q,onPaneMouseLeave:Ne,onPaneScroll:ve,onPaneContextMenu:Ce,onEdgeContextMenu:be,onEdgeMouseEnter:ie,onEdgeMouseMove:Te,onEdgeMouseLeave:J,onReconnect:Y,onReconnectStart:we,onReconnectEnd:We,reconnectRadius:zt,noDragClassName:ht,noWheelClassName:mt,noPanClassName:Pe,elevateEdgesOnSelect:gt,disableKeyboardA11y:Ge,nodeOrigin:je,nodeExtent:yt,rfId:xt})=>{let Ht=js(e,Vd),ce=js(t,Zd);return up(s),h.default.createElement(Ld,{onPaneClick:j,onPaneMouseEnter:te,onPaneMouseMove:Q,onPaneMouseLeave:Ne,onPaneContextMenu:Ce,onPaneScroll:ve,deleteKeyCode:H,selectionKeyCode:N,selectionOnDrag:M,selectionMode:D,onSelectionStart:y,onSelectionEnd:E,multiSelectionKeyCode:R,panActivationKeyCode:k,zoomActivationKeyCode:z,elementsSelectable:$,onMove:n,onMoveStart:r,onMoveEnd:o,zoomOnScroll:I,zoomOnPinch:P,zoomOnDoubleClick:W,panOnScroll:V,panOnScrollSpeed:B,panOnScrollMode:K,panOnDrag:G,defaultViewport:_,translateExtent:b,minZoom:A,maxZoom:O,onSelectionContextMenu:v,preventScrolling:S,noDragClassName:ht,noWheelClassName:mt,noPanClassName:Pe,disableKeyboardA11y:Ge},h.default.createElement(cp,null,h.default.createElement(ap,{edgeTypes:ce,onEdgeClick:a,onEdgeDoubleClick:u,onlyRenderVisibleElements:L,onEdgeContextMenu:be,onEdgeMouseEnter:ie,onEdgeMouseMove:Te,onEdgeMouseLeave:J,onReconnect:Y,onReconnectStart:we,onReconnectEnd:We,reconnectRadius:zt,defaultMarkerColor:T,noPanClassName:Pe,elevateEdgesOnSelect:!!gt,disableKeyboardA11y:Ge,rfId:xt},h.default.createElement(pp,{style:w,type:g,component:C,containerStyle:x})),h.default.createElement("div",{className:"react-flow__edgelabel-renderer"}),h.default.createElement(Xd,{nodeTypes:Ht,onNodeClick:i,onNodeDoubleClick:l,onNodeMouseEnter:c,onNodeMouseMove:f,onNodeMouseLeave:p,onNodeContextMenu:m,selectNodesOnDrag:d,onlyRenderVisibleElements:L,noPanClassName:Pe,noDragClassName:ht,disableKeyboardA11y:Ge,nodeOrigin:je,nodeExtent:yt,rfId:xt})))};La.displayName="GraphView";var hp=(0,h.memo)(La),Ur=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Ue={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Ur,nodeExtent:Ur,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:dt.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:na,isValidConnection:void 0},mp=()=>$o((e,t)=>({...Ue,setNodes:n=>{let{nodeInternals:r,nodeOrigin:o,elevateNodesOnSelect:s}=t();e({nodeInternals:Pr(n,r,o,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{let{defaultEdgeOptions:r={}}=t();e({edges:n.map(o=>({...r,...o}))})},setDefaultNodesAndEdges:(n,r)=>{let o=typeof n<"u",s=typeof r<"u",i=o?Pr(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:i,edges:s?r:[],hasDefaultNodes:o,hasDefaultEdges:s})},updateNodeDimensions:n=>{let{onNodesChange:r,nodeInternals:o,fitViewOnInit:s,fitViewOnInitDone:i,fitViewOnInitOptions:a,domNode:l,nodeOrigin:u}=t(),c=l?.querySelector(".react-flow__viewport");if(!c)return;let f=window.getComputedStyle(c),{m22:p}=new window.DOMMatrixReadOnly(f.transform),m=n.reduce((y,E)=>{let g=o.get(E.id);if(g?.hidden)o.set(g.id,{...g,[re]:{...g[re],handleBounds:void 0}});else if(g){let w=qr(E.nodeElement);!!(w.width&&w.height&&(g.width!==w.width||g.height!==w.height||E.forceUpdate))&&(o.set(g.id,{...g,[re]:{...g[re],handleBounds:{source:Xs(".source",E.nodeElement,p,u),target:Xs(".target",E.nodeElement,p,u)}},...w}),y.push({id:g.id,type:"dimensions",dimensions:w}))}return y},[]);Na(o,u);let v=i||s&&!i&&Ca(t,{initial:!0,...a});e({nodeInternals:new Map(o),fitViewOnInitDone:v}),m?.length>0&&r?.(m)},updateNodePositions:(n,r=!0,o=!1)=>{let{triggerNodeChanges:s}=t(),i=n.map(a=>{let l={id:a.id,type:"position",dragging:o};return r&&(l.positionAbsolute=a.positionAbsolute,l.position=a.position),l});s(i)},triggerNodeChanges:n=>{let{onNodesChange:r,nodeInternals:o,hasDefaultNodes:s,nodeOrigin:i,getNodes:a,elevateNodesOnSelect:l}=t();if(n?.length){if(s){let u=Aa(n,a()),c=Pr(u,o,i,l);e({nodeInternals:c})}r?.(n)}},addSelectedNodes:n=>{let{multiSelectionActive:r,edges:o,getNodes:s}=t(),i,a=null;r?i=n.map(l=>qe(l,!0)):(i=Ot(s(),n),a=Ot(o,[])),qn({changedNodes:i,changedEdges:a,get:t,set:e})},addSelectedEdges:n=>{let{multiSelectionActive:r,edges:o,getNodes:s}=t(),i,a=null;r?i=n.map(l=>qe(l,!0)):(i=Ot(o,n),a=Ot(s(),[])),qn({changedNodes:a,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{let{edges:o,getNodes:s}=t(),i=n||s(),a=r||o,l=i.map(c=>(c.selected=!1,qe(c.id,!1))),u=a.map(c=>qe(c.id,!1));qn({changedNodes:l,changedEdges:u,get:t,set:e})},setMinZoom:n=>{let{d3Zoom:r,maxZoom:o}=t();r?.scaleExtent([n,o]),e({minZoom:n})},setMaxZoom:n=>{let{d3Zoom:r,minZoom:o}=t();r?.scaleExtent([o,n]),e({maxZoom:n})},setTranslateExtent:n=>{t().d3Zoom?.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{let{edges:n,getNodes:r}=t(),s=r().filter(a=>a.selected).map(a=>qe(a.id,!1)),i=n.filter(a=>a.selected).map(a=>qe(a.id,!1));qn({changedNodes:s,changedEdges:i,get:t,set:e})},setNodeExtent:n=>{let{nodeInternals:r}=t();r.forEach(o=>{o.positionAbsolute=Kr(o.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{let{transform:r,width:o,height:s,d3Zoom:i,d3Selection:a,translateExtent:l}=t();if(!i||!a||!n.x&&!n.y)return!1;let u=Se.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),c=[[0,0],[o,s]],f=i?.constrain()(u,c,l);return i.transform(a,f),r[0]!==f.x||r[1]!==f.y||r[2]!==f.k},cancelConnection:()=>e({connectionNodeId:Ue.connectionNodeId,connectionHandleId:Ue.connectionHandleId,connectionHandleType:Ue.connectionHandleType,connectionStatus:Ue.connectionStatus,connectionStartHandle:Ue.connectionStartHandle,connectionEndHandle:Ue.connectionEndHandle}),reset:()=>e({...Ue})}),Object.is),Ba=({children:e})=>{let t=(0,h.useRef)(null);return t.current||(t.current=mp()),h.default.createElement(Pf,{value:t.current},e)};Ba.displayName="ReactFlowProvider";var Va=({children:e})=>(0,h.useContext)(jn)?h.default.createElement(h.default.Fragment,null,e):h.default.createElement(Ba,null,e);Va.displayName="ReactFlowWrapper";var gp={input:xa,default:Yr,output:va,group:to},yp={default:Gn,straight:jr,step:Gr,smoothstep:Qn,simplebezier:Wr},xp=[0,0],wp=[15,15],vp={x:0,y:0,zoom:1},bp={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Ep=(0,h.forwardRef)(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:s=gp,edgeTypes:i=yp,onNodeClick:a,onEdgeClick:l,onInit:u,onMove:c,onMoveStart:f,onMoveEnd:p,onConnect:m,onConnectStart:v,onConnectEnd:y,onClickConnectStart:E,onClickConnectEnd:g,onNodeMouseEnter:w,onNodeMouseMove:C,onNodeMouseLeave:x,onNodeContextMenu:N,onNodeDoubleClick:M,onNodeDragStart:D,onNodeDrag:R,onNodeDragStop:k,onNodesDelete:z,onEdgesDelete:H,onSelectionChange:L,onSelectionDragStart:$,onSelectionDrag:d,onSelectionDragStop:_,onSelectionContextMenu:b,onSelectionStart:A,onSelectionEnd:O,connectionMode:S=dt.Strict,connectionLineType:T=Ke.Bezier,connectionLineStyle:I,connectionLineComponent:P,connectionLineContainerStyle:V,deleteKeyCode:B="Backspace",selectionKeyCode:K="Shift",selectionOnDrag:W=!1,selectionMode:G=cn.Full,panActivationKeyCode:j="Space",multiSelectionKeyCode:te=Zn()?"Meta":"Control",zoomActivationKeyCode:Q=Zn()?"Meta":"Control",snapToGrid:Ne=!1,snapGrid:ve=wp,onlyRenderVisibleElements:Ce=!1,selectNodesOnDrag:be=!0,nodesDraggable:ie,nodesConnectable:Te,nodesFocusable:J,nodeOrigin:Y=xp,edgesFocusable:we,edgesUpdatable:We,elementsSelectable:zt,defaultViewport:ht=vp,minZoom:mt=.5,maxZoom:Pe=2,translateExtent:gt=Ur,preventScrolling:Ge=!0,nodeExtent:je,defaultMarkerColor:yt="#b1b1b7",zoomOnScroll:xt=!0,zoomOnPinch:Ht=!0,panOnScroll:ce=!1,panOnScrollSpeed:ke=.5,panOnScrollMode:Qe=ft.Free,zoomOnDoubleClick:Je=!0,panOnDrag:wt=!0,onPaneClick:Ie,onPaneMouseEnter:et,onPaneMouseMove:er,onPaneMouseLeave:tr,onPaneScroll:Rt,onPaneContextMenu:nr,children:ro,onEdgeContextMenu:tt,onEdgeDoubleClick:qa,onEdgeMouseEnter:Ka,onEdgeMouseMove:Za,onEdgeMouseLeave:Wa,onEdgeUpdate:Ga,onEdgeUpdateStart:ja,onEdgeUpdateEnd:Qa,onReconnect:Ja,onReconnectStart:el,onReconnectEnd:tl,reconnectRadius:nl=10,edgeUpdaterRadius:rl=10,onNodesChange:ol,onEdgesChange:il,noDragClassName:sl="nodrag",noWheelClassName:al="nowheel",noPanClassName:oo="nopan",fitView:ll=!1,fitViewOptions:cl,connectOnClick:ul=!0,attributionPosition:fl,proOptions:dl,defaultEdgeOptions:pl,elevateNodesOnSelect:hl=!0,elevateEdgesOnSelect:ml=!1,disableKeyboardA11y:io=!1,autoPanOnConnect:gl=!0,autoPanOnNodeDrag:yl=!0,connectionRadius:xl=20,isValidConnection:wl,onError:vl,style:bl,id:so,nodeDragThreshold:El,...Sl},_l)=>{let rr=so||"1";return h.default.createElement("div",{...Sl,style:{...bl,...bp},ref:_l,className:ge(["react-flow",o]),"data-testid":"rf__wrapper",id:so},h.default.createElement(Va,null,h.default.createElement(hp,{onInit:u,onMove:c,onMoveStart:f,onMoveEnd:p,onNodeClick:a,onEdgeClick:l,onNodeMouseEnter:w,onNodeMouseMove:C,onNodeMouseLeave:x,onNodeContextMenu:N,onNodeDoubleClick:M,nodeTypes:s,edgeTypes:i,connectionLineType:T,connectionLineStyle:I,connectionLineComponent:P,connectionLineContainerStyle:V,selectionKeyCode:K,selectionOnDrag:W,selectionMode:G,deleteKeyCode:B,multiSelectionKeyCode:te,panActivationKeyCode:j,zoomActivationKeyCode:Q,onlyRenderVisibleElements:Ce,selectNodesOnDrag:be,defaultViewport:ht,translateExtent:gt,minZoom:mt,maxZoom:Pe,preventScrolling:Ge,zoomOnScroll:xt,zoomOnPinch:Ht,zoomOnDoubleClick:Je,panOnScroll:ce,panOnScrollSpeed:ke,panOnScrollMode:Qe,panOnDrag:wt,onPaneClick:Ie,onPaneMouseEnter:et,onPaneMouseMove:er,onPaneMouseLeave:tr,onPaneScroll:Rt,onPaneContextMenu:nr,onSelectionContextMenu:b,onSelectionStart:A,onSelectionEnd:O,onEdgeContextMenu:tt,onEdgeDoubleClick:qa,onEdgeMouseEnter:Ka,onEdgeMouseMove:Za,onEdgeMouseLeave:Wa,onReconnect:Ja??Ga,onReconnectStart:el??ja,onReconnectEnd:tl??Qa,reconnectRadius:nl??rl,defaultMarkerColor:yt,noDragClassName:sl,noWheelClassName:al,noPanClassName:oo,elevateEdgesOnSelect:ml,rfId:rr,disableKeyboardA11y:io,nodeOrigin:Y,nodeExtent:je}),h.default.createElement(fd,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:m,onConnectStart:v,onConnectEnd:y,onClickConnectStart:E,onClickConnectEnd:g,nodesDraggable:ie,nodesConnectable:Te,nodesFocusable:J,edgesFocusable:we,edgesUpdatable:We,elementsSelectable:zt,elevateNodesOnSelect:hl,minZoom:mt,maxZoom:Pe,nodeExtent:je,onNodesChange:ol,onEdgesChange:il,snapToGrid:Ne,snapGrid:ve,connectionMode:S,translateExtent:gt,connectOnClick:ul,defaultEdgeOptions:pl,fitView:ll,fitViewOptions:cl,onNodesDelete:z,onEdgesDelete:H,onNodeDragStart:D,onNodeDrag:R,onNodeDragStop:k,onSelectionDrag:d,onSelectionDragStart:$,onSelectionDragStop:_,noPanClassName:oo,nodeOrigin:Y,rfId:rr,autoPanOnConnect:gl,autoPanOnNodeDrag:yl,onError:vl,connectionRadius:xl,isValidConnection:wl,nodeDragThreshold:El}),h.default.createElement(cd,{onSelectionChange:L}),ro,h.default.createElement(Hf,{proOptions:dl,position:fl}),h.default.createElement(gd,{rfId:rr,disableKeyboardA11y:io})))});Ep.displayName="ReactFlow";var Sp=e=>e.edges;function Fa(){return oe(Sp,ue)}function Ya(e){return t=>{let[n,r]=(0,h.useState)(t),o=(0,h.useCallback)(s=>r(i=>e(s,i)),[]);return[n,r,o]}}var yx=Ya(Aa),xx=Ya(kd);var me=nt($e(),1),_p=({isOpen:e,title:t,message:n,onConfirm:r,onCancel:o,confirmLabel:s="Delete",confirmColor:i="red",icon:a="trash"})=>{if(!e)return null;let l={red:{header:"bg-red-500",button:"bg-red-500 hover:bg-red-600"},purple:{header:"bg-purple-500",button:"bg-purple-500 hover:bg-purple-600"},orange:{header:"bg-orange-500",button:"bg-orange-500 hover:bg-orange-600"},blue:{header:"bg-blue-500",button:"bg-blue-500 hover:bg-blue-600"}},u={trash:me.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-6 h-6"},me.default.createElement("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})),warning:me.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-6 h-6"},me.default.createElement("path",{fillRule:"evenodd",d:"M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495zM10 5a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 0110 5zm0 9a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"}))},c=l[i]||l.red;return me.default.createElement("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:o},me.default.createElement("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl overflow-hidden max-w-sm mx-4 transform transition-all",onClick:f=>f.stopPropagation()},me.default.createElement("div",{className:`${c.header} px-6 py-4 flex items-center gap-3`},me.default.createElement("div",{className:"text-white/90"},u[a]||u.trash),me.default.createElement("h3",{className:"text-lg font-bold text-white"},t)),me.default.createElement("div",{className:"p-6"},me.default.createElement("p",{className:"text-slate-600 dark:text-slate-300 text-sm leading-relaxed"},n)),me.default.createElement("div",{className:"px-6 pb-6 flex justify-end gap-3"},me.default.createElement("button",{onClick:o,className:`px-4 py-2 text-sm font-medium text-slate-600 dark:text-slate-300 
                            bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 
                            rounded-lg transition-colors`},"Cancel"),me.default.createElement("button",{onClick:r,className:`px-4 py-2 text-sm font-medium text-white ${c.button} rounded-lg transition-colors shadow-sm`},s))))},Xa=_p;var X=nt($e(),1),Np=({sourceNodeId:e,position:t,onAddNode:n,availableNodes:r={}})=>{let[o,s]=(0,X.useState)(!1),[i,a]=(0,X.useState)(""),[l,u]=(0,X.useState)("Actions"),c={Triggers:{icon:"\u26A1",color:"orange",emoji:"\u{1F514}"},Actions:{icon:"\u{1F4E4}",color:"blue",emoji:"\u2699\uFE0F"},Transform:{icon:"\u{1F504}",color:"purple",emoji:"\u{1F500}"},"Flow Control":{icon:"\u21AA\uFE0F",color:"yellow",emoji:"\u{1F500}"},Other:{icon:"\u{1F4E6}",color:"gray",emoji:"\u{1F4E6}"}},f=(0,X.useMemo)(()=>{if(!r||typeof r!="object")return{};if(!i)return r;let w={};return Object.entries(r).forEach(([C,x])=>{if(!Array.isArray(x))return;let N=x.filter(M=>M.name?.toLowerCase().includes(i.toLowerCase())||M.description?.toLowerCase().includes(i.toLowerCase()));N.length>0&&(w[C]=N)}),w},[r,i]),p=Object.keys(f).filter(w=>Array.isArray(f[w])&&f[w].length>0);(0,X.useMemo)(()=>{p.length>0&&!p.includes(l)&&u(p[0])},[p,l]);let m=w=>{let C=w?.replace("heroicon-o-","").replace("heroicon-","");return{bolt:"\u26A1","paper-airplane":"\u{1F4E4}",funnel:"\u{1F53D}",filter:"\u{1F53D}","arrows-pointing-out":"\u21AA\uFE0F",cube:"\u{1F4E6}"}[C]||"\u2699\uFE0F"},v={orange:{tab:"border-orange-500 text-orange-600 dark:text-orange-400",tabInactive:"border-transparent text-slate-500 hover:text-orange-500",card:"border-orange-200 hover:border-orange-400"},blue:{tab:"border-blue-500 text-blue-600 dark:text-blue-400",tabInactive:"border-transparent text-slate-500 hover:text-blue-500",card:"border-blue-200 hover:border-blue-400"},purple:{tab:"border-purple-500 text-purple-600 dark:text-purple-400",tabInactive:"border-transparent text-slate-500 hover:text-purple-500",card:"border-purple-200 hover:border-purple-400"},yellow:{tab:"border-yellow-500 text-yellow-600 dark:text-yellow-400",tabInactive:"border-transparent text-slate-500 hover:text-yellow-500",card:"border-yellow-200 hover:border-yellow-400"},gray:{tab:"border-gray-500 text-gray-600 dark:text-gray-400",tabInactive:"border-transparent text-slate-500 hover:text-gray-500",card:"border-gray-200 hover:border-gray-400"}},y=f[l]||[],E=c[l]||c.Other,g=v[E.color];return o?X.default.createElement(X.default.Fragment,null,X.default.createElement("div",{className:"fixed inset-0 bg-black/20 z-40",onClick:()=>{s(!1),a("")}}),X.default.createElement("div",{onClick:w=>w.stopPropagation(),className:`
                    fixed z-50
                    bg-white dark:bg-slate-800 
                    rounded-xl shadow-2xl border border-slate-200 dark:border-slate-700
                    w-[500px] max-h-[70vh]
                    flex flex-col overflow-hidden
                `,style:{left:`${t?.x||0}px`,top:`${t?.y||0}px`}},X.default.createElement("div",{className:"flex items-center justify-between px-4 py-3 border-b border-slate-200 dark:border-slate-700"},X.default.createElement("h4",{className:"font-semibold text-slate-700 dark:text-slate-200"},"Add Node"),X.default.createElement("button",{onClick:()=>{s(!1),a("")},className:"text-slate-400 hover:text-slate-600 transition-colors"},X.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5"},X.default.createElement("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})))),X.default.createElement("div",{className:"px-4 py-3 border-b border-slate-200 dark:border-slate-700"},X.default.createElement("div",{className:"relative"},X.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"},X.default.createElement("path",{fillRule:"evenodd",d:"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z",clipRule:"evenodd"})),X.default.createElement("input",{type:"text",placeholder:"Search nodes...",value:i,onChange:w=>a(w.target.value),className:`
                                w-full pl-9 pr-3 py-2
                                bg-slate-50 dark:bg-slate-700/50
                                border border-slate-200 dark:border-slate-600
                                rounded-lg text-sm
                                text-slate-700 dark:text-slate-200
                                placeholder:text-slate-400
                                focus:outline-none focus:ring-2 focus:ring-orange-500
                            `}))),X.default.createElement("div",{className:"border-b border-slate-200 dark:border-slate-700 px-3"},X.default.createElement("div",{className:"flex gap-0.5 -mb-px overflow-x-auto scrollbar-hide"},p.map(w=>{let C=c[w]||c.Other,x=v[C.color],N=l===w,M=f[w]?.length||0;return X.default.createElement("button",{key:w,onClick:()=>u(w),className:`
                                        px-2.5 py-2 border-b-2 font-medium text-xs
                                        transition-all duration-200
                                        flex items-center gap-1 whitespace-nowrap
                                        ${N?x.tab:x.tabInactive}
                                    `},X.default.createElement("span",{className:"text-sm"},C.emoji),X.default.createElement("span",null,w),X.default.createElement("span",{className:"px-1 py-0.5 rounded text-xs bg-slate-100 dark:bg-slate-700 text-slate-500"},M))}))),X.default.createElement("div",{className:"p-3 max-h-[400px] overflow-y-auto scrollbar-hide"},y.length===0?X.default.createElement("div",{className:"text-center py-8"},X.default.createElement("p",{className:"text-slate-400 text-sm"},"No nodes found")):X.default.createElement("div",{className:"space-y-1"},y.map(w=>{let C={CORE:"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 border border-slate-300 dark:border-slate-600",PRO:"bg-gradient-to-r from-purple-500 to-pink-500 text-white border-0",FREE:"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 border border-emerald-300"},x=C[w.tier]||C.FREE;return X.default.createElement("button",{key:w.type,onClick:()=>{n(w.type,e),s(!1),a("")},className:`
                                            w-full p-3 rounded-lg text-left
                                            bg-white dark:bg-slate-700/50
                                            border ${g.card}
                                            transition-all duration-150
                                            hover:shadow-md
                                        `},X.default.createElement("div",{className:"flex items-center gap-2"},X.default.createElement("span",{className:"text-2xl"},m(w.icon)),X.default.createElement("div",{className:"flex-1 min-w-0"},X.default.createElement("div",{className:"flex items-center justify-between gap-2 mb-0.5"},X.default.createElement("h5",{className:"font-medium text-sm text-slate-700 dark:text-slate-200"},w.name),X.default.createElement("span",{className:`
                                                        px-1.5 py-0.5 rounded text-xs font-bold
                                                        flex-shrink-0 ${x}
                                                    `},w.tier||"FREE")),X.default.createElement("p",{className:"text-xs text-slate-500 dark:text-slate-400 truncate mb-0.5"},w.description||`Add ${w.name}`),X.default.createElement("p",{className:"text-xs text-slate-400 dark:text-slate-500 italic"},"by ",w.author||"Unknown"))))})))),X.default.createElement("style",{jsx:!0},`
                .scrollbar-hide {
                    -ms-overflow-style: none;
                    scrollbar-width: none;
                }
                .scrollbar-hide::-webkit-scrollbar {
                    display: none;
                }
            `)):X.default.createElement("button",{onClick:()=>s(!0),className:`
                    absolute -bottom-6 left-1/2 -translate-x-1/2
                    w-8 h-8 rounded-full
                    bg-orange-500 hover:bg-orange-600
                    text-white shadow-lg
                    flex items-center justify-center
                    transition-all duration-200
                    hover:scale-110
                    z-10
                `,title:"Add Node"},X.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5"},X.default.createElement("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})))},Ua=Np;var Cp=({id:e,data:t})=>{let{setNodes:n}=Jn(),r=Fa(),[o,s]=(0,q.useState)(t.isNew||!1),[i,a]=(0,q.useState)(t.label||"MailNode"),[l,u]=(0,q.useState)(t.description||""),[c,f]=(0,q.useState)(!1),p=r.some(N=>N.target===e),m=r.some(N=>N.source===e),v=()=>{s(!1),t.isNew&&n(N=>N.map(M=>M.id===e?{...M,data:{...M.data,isNew:!1}}:M))},y=(N=i,M=l)=>{if(t.livewireId&&window.Livewire){let D=window.Livewire.find(t.livewireId);D&&D.call("updateNodeConfig",{nodeId:e,label:N,description:M})}},E=N=>{a(N),y(N,l)},g=N=>{u(N),y(i,N)},w=()=>{f(!0)},C=()=>{f(!1),t.livewireId&&window.Livewire&&window.Livewire.find(t.livewireId)?.call("deleteNode",e)},x=(N,M)=>{if(!t.livewireId||!window.Livewire)return;let D=window.Livewire.find(t.livewireId);D&&(D.call("createGenericNode",{type:N,sourceNodeId:M}),v())};return q.default.createElement(q.default.Fragment,null,q.default.createElement(Xa,{isOpen:c,title:"Delete MailNode",message:'Are you sure you want to delete "'+i+'"?',onConfirm:C,onCancel:()=>f(!1)}),q.default.createElement("div",{className:"relative bg-white dark:bg-slate-900 border-2 rounded-xl "+(p?"border-blue-500":"border-slate-300 dark:border-slate-600")+" shadow-lg min-w-[300px] max-w-[420px] transition-all duration-200"},q.default.createElement(pt,{type:"target",position:F.Left,className:"!bg-blue-500 !w-3 !h-3 !border-2 !border-white"}),q.default.createElement("div",{className:"bg-blue-500 px-4 py-2.5 flex items-center justify-between rounded-t-lg"},q.default.createElement("div",{className:"flex items-center gap-2"},q.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4 text-white"},q.default.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})),q.default.createElement("span",{className:"text-xs font-bold text-white uppercase tracking-wider"},i)),q.default.createElement("div",{className:"flex items-center gap-2"},q.default.createElement("button",{onClick:()=>s(!o),className:"nodrag text-white/80 hover:text-white transition-colors",title:o?"Collapse":"Expand",disabled:!p},q.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4 transition-transform "+(o?"rotate-180":"")+" "+(p?"":"opacity-50")},q.default.createElement("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"}))),q.default.createElement("button",{onClick:w,className:"nodrag text-white/80 hover:text-white transition-colors",title:"Delete"},q.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4"},q.default.createElement("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"}))))),q.default.createElement("div",{className:"p-4"},p?o?q.default.createElement("div",{className:"nodrag space-y-3"},q.default.createElement("div",null,q.default.createElement("label",{className:"block text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-1"},"Name"),q.default.createElement("input",{type:"text",value:i,onChange:N=>E(N.target.value),placeholder:"Node name...",className:`w-full px-3 py-2 text-sm border border-slate-300 dark:border-slate-600 rounded-md 
                                        bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100
                                        focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none`})),q.default.createElement("div",null,q.default.createElement("label",{className:"block text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-1"},"Description"),q.default.createElement("input",{type:"text",value:l,onChange:N=>g(N.target.value),placeholder:"Optional description...",className:`w-full px-3 py-2 text-sm border border-slate-300 dark:border-slate-600 rounded-md 
                                        bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100
                                        focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none`})),q.default.createElement("div",{className:"text-xs text-slate-400 italic text-center py-2"},"Add your configuration fields here")):q.default.createElement("div",null,l&&q.default.createElement("div",{className:"text-slate-500 dark:text-slate-400 text-xs italic mb-2"},l),q.default.createElement("div",{className:"text-slate-400 dark:text-slate-500 italic text-sm"},"Click to configure")):q.default.createElement("div",{className:"text-center py-4"},q.default.createElement("div",{className:"text-slate-400 dark:text-slate-500 text-sm mb-2"},q.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-8 h-8 mx-auto mb-2 opacity-50"},q.default.createElement("path",{fillRule:"evenodd",d:"M4.25 2A2.25 2.25 0 002 4.25v2.5A2.25 2.25 0 004.25 9h2.5A2.25 2.25 0 009 6.75v-2.5A2.25 2.25 0 006.75 2h-2.5zm0 9A2.25 2.25 0 002 13.25v2.5A2.25 2.25 0 004.25 18h2.5A2.25 2.25 0 009 15.75v-2.5A2.25 2.25 0 006.75 11h-2.5zm9-9A2.25 2.25 0 0011 4.25v2.5A2.25 2.25 0 0013.25 9h2.5A2.25 2.25 0 0018 6.75v-2.5A2.25 2.25 0 0015.75 2h-2.5zm0 9A2.25 2.25 0 0011 13.25v2.5A2.25 2.25 0 0013.25 18h2.5A2.25 2.25 0 0018 15.75v-2.5A2.25 2.25 0 0015.75 11h-2.5z",clipRule:"evenodd"}))),q.default.createElement("div",{className:"text-blue-500 font-medium text-sm"},"Connect data"))),q.default.createElement(pt,{type:"source",position:F.Right,className:"!bg-blue-500 !w-3 !h-3 !border-2 !border-white "+(m?"opacity-100":"opacity-0"),style:{right:"-6px",top:"50%"}}),!m&&q.default.createElement("div",{className:"absolute right-0 top-1/2 translate-x-1/2 -translate-y-1/2 z-10"},q.default.createElement(Ua,{onAddNode:x,sourceNodeId:e,livewireId:t.livewireId,availableNodes:t.availableNodes,color:"blue"}))))},Mp=Cp;return Il(Ap);})();
/*! Bundled license information:

react/cjs/react.production.js:
  (**
   * @license React
   * react.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

use-sync-external-store/cjs/use-sync-external-store-shim.production.js:
  (**
   * @license React
   * use-sync-external-store-shim.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.production.js:
  (**
   * @license React
   * use-sync-external-store-shim/with-selector.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.js:
  (**
   * @license React
   * react-dom.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/
